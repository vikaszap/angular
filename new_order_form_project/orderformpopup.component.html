 <app-price-popup [orderformpopupflag]="true" [orderform_recipeid]="receipe"></app-price-popup>
<app-fields-popup [orderformpopupflag]="true" [orderform_recipeid]="receipe"></app-fields-popup>
<app-options-popup #saveOptionsPopup [orderformpopupOptionflag]="true"></app-options-popup>
<app-optionslist-popup (optionreset)="getFilterData('filterBasedcall')" [orderformpopupflag]="true" [orderform_recipeid]="receipe"></app-optionslist-popup>
<app-materials-fabric-popup #materialfabric [materialTypecolor]="option_fabric_editfielddata?.fieldtypeid" [orderformpopupflag]="true" [orderform_recipeid]="receipe"></app-materials-fabric-popup>
<app-materials-color-popup #colorfabric [orderformpopupflag]="true"></app-materials-color-popup>


<ng-template #globalProductModal>
   <div class="modaloverwrite">
      <div class="modal-header d-none">
         <h5>{{'Product Information' | translate}}</h5>

      </div>
      <div>
         <span (click)="closeModal()" [ngStyle]="closeflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''" class="innerclose"><i aria-hidden="true"  class="fas fa fa-times"></i></span>
      </div>
      <div class="modal-body pt-0">
         <!-- <app-orderform></app-orderform> -->
         <!-- (click)="productFormResetFn();" -->
         <span [ngStyle]="closeflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''"  class="innerclose" (click)="resetImageForProColOpt()"><i aria-hidden="true" class="fas fa fa-times" ></i></span>
         <div class="productstatus" *ngIf="productstatusflag" id="sampleModal1" [ngClass]="receipedisabledflag ? 'pinktaber' : ''">
         <div class="resscroll">
            <div class="row">
               <div class="col pr-md-0 pr-lg-3" id="mat-border">
                  <span class="receipesec " *ngIf="productstatusselectedindex == 1"><span class="mr-2">{{'Recipe Name:' | translate}}</span>{{receipename}}</span>
                  <mat-tab-group headerPosition="above" (selectedTabChange)="productstatustabClick($event)" [(selectedIndex)]="productstatusselectedindex"
                     animationDuration="0ms">
                     <mat-tab label="{{ selectionProductFieldName }}">
                        <div [ngClass]="acceptanceflag ? '' : 'quoacceptance'" class="row m-0 sectionshow" [ngStyle]="onllineaftersubmitordereditflag  ? '' : { opacity: '0.6', 'pointer-events ': 'none' }">
                           <div class="rollerinfo col p-0">
                              <div class="production-status row pt-2" [ngClass]="receipedisabledflag ? 'greyLayout pl-3' : ''" >
                                 <div class="d-flex statusprod ml-1" *ngIf="!receipedisabledflag && !onlineflag">

                                    <span class="mt-1" style="white-space: nowrap;">{{'Product Status:' | translate}} </span>
                                    <!-- <select *ngIf="prostatussinglemultipleflag == 1" [(ngModel)]="prostatus" class="form-control mb-0 w-50 prodstatusselect" style="line-height: 19px !important;">
                                       <option value="" disabled>Select Status</option>
                                       <option *ngFor="let status of productstatusarray;let i=index" value={{status.id}}>{{status.itemname}}</option>
                                    </select> -->
                                    <ng-multiselect-dropdown *ngIf="prostatussinglemultipleflag == 1" [(ngModel)]="prostatusselectarray" [ngModelOptions]="{standalone: true}" id="productstatus" class="marketmulti1"
                                    placeholder="{{ 'Select Status' | translate }}" [settings]="statussingledropdownSettings"
                                    [data]="productstatusarray" (onSelect)="onItemSelect($event)" (onDeSelect)="OnItemDeSelect($event)"
                                    (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onDeSelectAll($event)" [tabindex]="onllineaftersubmitordereditflag  ? '' : '-1'">
                                    </ng-multiselect-dropdown>
                                    <ng-multiselect-dropdown *ngIf="prostatussinglemultipleflag == 2" [(ngModel)]="prostatusselectarray" [ngModelOptions]="{standalone: true}" id="productstatus" class="marketmulti1"
                                    placeholder="{{ 'Select Status' | translate }}" [settings]="statusdropdownSettings"
                                    [data]="productstatusarray" (onSelect)="onItemSelect($event)" (onDeSelect)="OnItemDeSelect($event)"
                                    (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onDeSelectAll($event)" [tabindex]="onllineaftersubmitordereditflag  ? '' : '-1'">
                                    </ng-multiselect-dropdown>
                                    <!-- <dx-drop-down-box
                                    [(value)]="gridBoxValue"
                                    valueExpr="ID"
                                    displayExpr="CompanyName"
                                    placeholder="Select a value..."
                                    [showClearButton]="true"
                                    [dataSource]="gridDataSource"
                                 >
                                 </dx-drop-down-box> -->
                                 </div>
                                 <div class="d-flex statusprod statusprodext pl-0 mx-1" >
                                    <span class="mt-1" style="white-space: nowrap;">{{'Recipe Name:' | translate}}</span>
                                    <select class="form-control mb-0 w-50" [disabled]="receipedisabledflag || disableFields||(onlineflag && (!onllineaftersubmitordereditflag)) " [(ngModel)]="receipe" (change)="selectrecipe(true)" [ngModelOptions]="{standalone: true}" [tabindex]="onllineaftersubmitordereditflag  ? '' : '-1'">
                                       <option value="" disabled>{{'Select' | translate}}</option>
                                       <ng-container *ngFor="let receipeItem of receipelistArr;trackBy:tracker;let i =index;">
                                          <option *ngIf="((receipeItem.showhide==1 && receipeItem.recipeonlineportal!=1) || (receipeItem.showhide!=1 &&receipeItem.recipeonlineportal==1) || (receipeItem.showhide==1 &&receipeItem.recipeonlineportal==1) || (receipeItem.id == receipe))" value="{{receipeItem.id}}">{{receipeItem.recipename | translate}}</option>
                                       </ng-container>
                                    </select>
                                    <!-- <i class="fas fa-pen my-2"></i> -->
                                    <label class="switch switchW" *ngIf="!receipedisabledflag && !onlineflag">
                                       <input type="checkbox" value="1" [(ngModel)]="ordereditparams.ready" [ngModelOptions]="{standalone: true}" (change)="changeorderstatus($event)" id="versionbtn">
                                       <div class="slider round">
                                          <span class="on" title="{{'Ready'| translate}}">{{'Ready'| translate}}</span>
                                          <span class="off NtRdy" title="{{'Not Ready'| translate}}">{{'Not Ready'| translate}}</span>
                                       </div>
                                 </label>

                                 </div>


                              </div>

                              <!-- <div class="dx-viewport">
                                 <dx-drop-down-box [(value)]="gridBoxValue" valueExpr="EmployeeID"
                                 displayExpr="FullName" placeholder="Select a value..."
                                 [showClearButton]="true" [dataSource]="dataSource">
                                 <div *dxTemplate="let data of 'content'">
                                    <dx-data-grid [selection]="{ mode: 'multiple' }"
                                    [dataSource]="dataSource"
                                    (onSelectionChanged)="selectionChanged($event)"
                                    [allowColumnReordering]="true" [allowColumnResizing]="true"
                                    (onRowUpdated)="logEvent($event)"
                                    [(selectedRowKeys)]="gridBoxValue">
                                    <dxo-filter-row [visible]="true"></dxo-filter-row>
                                    <dxi-column type="buttons">
                                       <dxi-button [onClick]="onorderedit" [visible]="true" icon="edit" name="edit"></dxi-button>
                                    </dxi-column>
                                    <dxi-column dataField="Quantity"></dxi-column>
                                    <dxi-column [allowEditing]="false" *ngFor="let col of dxcolarray" dataField={{col}}></dxi-column>
                                    <dxo-editing mode="cell" [allowUpdating]="true"></dxo-editing>
                                    </dx-data-grid>
                                 </div>
                                 </dx-drop-down-box>
                                 <input type="button" (click)="deleteRecords()" [disabled]="!selectedItemKeys.length" value="Delete Selected Records">
                              </div> -->



                              <div class="measurement w-100" id="ordergrid">
                                 <div class="form-group" *ngIf="forms != null">
                                    <div *ngFor="let f of forms">
                                       <form novalidate #form
                                          [formGroup]="f.formGroup">
                                          <!-- <div class="row">
                                             <div class="col-md-5">
                                                <label>{{'Unit Of Measurement' | titlecase }}{{orderlength}}</label>
                                             </div>
                                             <div class="col-md-7">
                                                <select class="form-control" [(ngModel)]="measurement">
                                                   <option value="" disabled>Select</option>
                                                   <option *ngFor="let measure of Measurementarray;let i=index" value="{{measure.id}}">{{measure.name}}</option>
                                                </select>
                                             </div>
                                          </div> -->
                                          <div class="row"  [ngStyle]="enabledisableflag || disableFields  ? {'pointer-events ': 'none' } : ''" [ngClass]="disableFields ? 'disableFields' : ''" (keydown)="blockKeyboardEvents($event)">
                                             <div class="col-sm-12 col-md-12 col-lg-6 customfocuscol">
                                                <div class="row align-items-center customrowstyle"  [ngClass]="{'iconwrapper': (prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22 || prop.fieldtypeid == 33) && (i<orderlength) && (!onlineflag) && (edishowhideField(prop)) }"  [ngStyle]=" (onlineflag && prop.showFieldOnCustomerPortal) || (!onlineflag && prop.showfieldonjob)? '' : {'display':'none'}"  *ngFor="let prop of f.metaData; let i = index">
                                                   <div  class="col-md-4 col-lg-4 pr-0 d-flex align-items-center" *ngIf="i<orderlength" >
                                                      <!-- <label [attr.for]="prop">{{ prop.fieldname }}<span *ngIf="prop.mandatory" style="color: red;">*</span></label> -->
                                                      <ng-container id="labelcontainer" [ngSwitch]="true">
                                                         <label class="edit_job_popup_label" [attr.for]="prop" *ngSwitchCase="prop.fieldtypeid != 3 && prop.fieldtypeid != 6 && prop.fieldtypeid != 18 && prop.fieldtypeid != 28">{{ prop.fieldname}}<span *ngIf="prop.mandatory" style="color: red;">*</span></label>
                                                         <span *ngIf="prop.fieldInformation !== '' && prop.fieldInformation !== null">
                                                            <ejs-tooltip id="tooltip" content="{{breakLines(prop.fieldInformation)}}" tipPointerPosition="RightCenter" closeDelay="500" cssClass='customtooltip'>
                                                            <i id="info-icon"  *ngSwitchCase="prop.fieldtypeid != 3 && prop.fieldtypeid != 6 && prop.fieldtypeid != 18 && prop.fieldtypeid != 28" class="fa fa-info-circle" aria-hidden="true"></i>
                                                            </ejs-tooltip>
                                                         </span>

                                                      <!--EDI setup-->
                                                      <ng-container *ngIf="edishowhideField(prop)">
                                                         <label class="edit_job_popup_label" [attr.for]="prop" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 6 || prop.fieldtypeid == 18 || prop.fieldtypeid == 28">{{ prop.fieldname}} <span *ngIf="prop.mandatory" style="color: red;">*</span></label>
                                                         <span *ngIf="prop.fieldInformation !== '' && prop.fieldInformation !== null">
                                                            <ejs-tooltip id="tooltip" content="{{breakLines(prop.fieldInformation)}}" tipPointerPosition="RightCenter" closeDelay="500" cssClass='customtooltip'>
                                                               <i id="info-icon"  *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 6 || prop.fieldtypeid == 18 || prop.fieldtypeid == 28" class="fa fa-info-circle" aria-hidden="true"></i>
                                                            </ejs-tooltip>
                                                         </span>
                                                         </ng-container>
                                                      </ng-container>
                                                   </div>
                                                   <div class="col-md-7 col-lg-8" *ngIf="i<orderlength" [ngClass]="{'choose_fab': selectioncategory == 6 && prop.fieldtypeid =='22' && prop.fabricorcolor ==1 }"   id="spinnerId{{prop.fieldid}}">
                                                      <ng-container id="container" [ngSwitch]="true">

                                                         <!-- <input (paste)="Pastedata($event)" (keypress)="validationdata($event)" name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldname]?.touched) && inst['controls'][prop.fieldname]?.errors?.required }" (change)="passwidthdropvalue($event,prop,i,prop.fieldname)" id="subgrid{{i}}" *ngSwitchCase="prop.fieldtypeid == 18" class="form-control"  [formControlName]="prop.fieldname"  type="text"  autocomplete="off" /> -->
                                                      <div class="" [ngClass]="prop.issubfabric || (category == 6 && prop?.multiseq > 1) ? 'w-100' : 'add_in'">
                                                            <!-- <input readonly  id="subgrid{{i}}" name="ordertext{{i}}" (keypress)="prop.ruleoverride==0 ? ''  : orderformkeyvalidation($event,prop.fieldid,i,prop)" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched && inst['controls'][prop.fieldid]?.errors?.required) || prop?.stock_not_available_err }" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 2 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22  || prop.fieldtypeid == 33"
                                                            class="form-control dropdown-toggle" [formControlName]="prop.fieldid" type="text"  aria-autocomplete="none"  (click)="supcomponentfn($event,prop.fieldid,i,prop)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">

                                                            <div id="subgrid{{i}}"    *ngSwitchCase="prop.fieldtypeid == 2 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22  || prop.fieldtypeid == 33" class="dropdown">
                                                               <button tabindex="-1" class="btn dropdown-toggle" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" type="button" (click)="supcomponentfn($event,prop.fieldid,i,prop)" [ngStyle]="(prop.ruleoverride==0 &&  prop.fieldtypeid == 22 )? {'pointer-events': 'none'} : ''" [disabled]="prop.ruleoverride==0 ? true : false"><i class="fas fa-chevron-down"></i></button>

                                                            </div> -->
                                                            <div *ngSwitchCase="prop.fieldtypeid == 2 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22 || prop.fieldtypeid == 33 " id="comboGridCover{{prop.fieldid}}" class="position-relative">
                                                              <app-combrogrid  #combogridchild (actionTriggered)="handleAction($event)" [form]="inst" [forms]="forms" [index]="i" [res]="prop" [staticArrayData]="staticArrayData" [loadingIndex]="loadingIndex"  [disableFields]="disableFields" [rulesBaseDisableSave]="rulesBaseDisableSave" [onllineaftersubmitordereditflag]="onllineaftersubmitordereditflag" ></app-combrogrid >
                                                            </div>



                                                            <!--EDI setup-->
                                                            <ng-container *ngIf="edishowhideField(prop)">
                                                               <div *ngSwitchCase="prop.fieldtypeid == 3" id="comboGridCover{{prop.fieldid}}" class="position-relative">
                                                                  <app-combrogrid  #combogridchild  (actionTriggered)="handleAction($event)" [form]="inst" [forms]="forms" [index]="i" [res]="prop" [staticArrayData]="staticArrayData" [loadingIndex]="loadingIndex" [disableFields]="disableFields" [rulesBaseDisableSave]="rulesBaseDisableSave" [onllineaftersubmitordereditflag]="onllineaftersubmitordereditflag"></app-combrogrid >
                                                               </div>

                                                               <!-- <input readonly  id="subgrid{{i}}" name="ordertext{{i}}" (keypress)="orderformkeyvalidation($event,prop.fieldid,i,prop)" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched && inst['controls'][prop.fieldid]?.errors?.required) || prop?.stock_not_available_err }" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 3 "
                                                            class="form-control dropdown-toggle" [formControlName]="prop.fieldid" type="text"  aria-autocomplete="none"  (click)="supcomponentfn($event,prop.fieldid,i,prop)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">
                                                            <div id="subgrid{{i}}"    *ngSwitchCase="prop.fieldtypeid == 3" class="dropdown">
                                                               <button tabindex="-1" class="btn dropdown-toggle" type="button" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" (click)="supcomponentfn($event,prop.fieldid,i,prop)" [disabled]="prop.ruleoverride==0 ? true : false"><i class="fas fa-chevron-down"></i></button>
                                                            </div> -->
                                                            </ng-container>

                                                         </div>


                                                         <div class="add ml-2" *ngIf="selectioncategory == 6 && prop.fieldtypeid =='22' && prop.fabricorcolor ==1 && !(prop.issubfabric) && prop.multiseq == 1">
                                                            <button class="Newsavebtn" id="materialPopupButton" (click)="materialpopup()" (focus)="onOpenPanel = true " (blur)="onOpenPanel = false" >
                                                               <span><i class="fa fa-plus" aria-hidden="true"></i></span>
                                                               {{'add' | translate}}
                                                            </button>
                                                         </div>
                                                         <div class="add ml-2 hovereditbuttonhideshow" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || (prop.fieldtypeid == 22 && prop.multiseq == 1) || prop.fieldtypeid == 33" >
                                                            <i class="fas fa-pencil-alt penicon text-right" (click)="editfabricoption($event,i,prop)"></i>
                                                                                                                     </div>
                                                         <div id="sublevelgrid{{i}}" class="sublevelpopup">
                                                            {{'subpopup...' | translate}}
                                                         </div>
                                                              <div  class="loading_spinner" >
                                                                     <div class="spinner-border spinner-border-sm mb-2 ml-2" role="status">
                                                                     </div>
                                                                  </div>
                                                         <!-- <div class="dx-viewport" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22">
                                                            <dx-drop-down-box [value]="getValue(prop.dumydata)" valueExpr="optionid"
                                                            displayExpr="optionname" placeholder="Select a value..."
                                                            [showClearButton]="false" [dataSource]="prop.optionsvalue" (click)="onorderdropdownedit($event,prop.fieldname,i,prop)">
                                                               <div *dxTemplate="let data of 'content'">
                                                                  <dx-data-grid
                                                                  (onSelectionChanged)="exampleModalbk($event,i)"
                                                                  [dataSource]="prop.optionsvalue"
                                                                  (onSelectionChanged)="selectionChanged($event,i)"
                                                                  [allowColumnReordering]="true" [allowColumnResizing]="true"
                                                                  (onRowUpdated)="logEvent($event)"
                                                                  [(selectedRowKeys)]="prop.dumydata">
                                                                  <dxo-selection mode="multiple"></dxo-selection>
                                                                  <dxo-filter-row [visible]="true"></dxo-filter-row>
                                                                  <dxi-column type="buttons">
                                                                     <dxi-button [onClick]="onorderedit" [visible]="true" icon="edit" name="edit"></dxi-button>
                                                                  </dxi-column>
                                                                  <dxi-column [allowEditing]="false" *ngFor="let col of dxcolarray" dataField={{col}}></dxi-column>
                                                                  <dxo-editing mode="cell" [allowUpdating]="true"></dxo-editing>
                                                                  </dx-data-grid>
                                                               </div>
                                                            </dx-drop-down-box>
                                                            <input type="button" (click)="deleteRecords()" [disabled]="!selectedItemKeys.length" value="Delete Selected Records">
                                                         </div> -->


                                                         <input  (paste)="Pastedata($event)"  (keypress)="validationdata($event);" name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" id="subgrid{{i}}"  *ngSwitchCase="'email'" class="form-control" type="email"   [formControlName]="prop.fieldid" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />

                                                         <textarea  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" id="subgrid{{i}}"  *ngSwitchCase="'textarea'" class="form-control"  [value]="prop.value" [formControlName]="prop.fieldid" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" ></textarea>

<div [ngClass]="{'inchescustomstyle': (prop.fieldtypeid == 1 || prop.fieldtypeid == 11 || prop.fieldtypeid ==12  || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32 || prop.fieldtypeid == 28) &&  unittypevaluehideshow=='Inches'  && inchfractionselected !=3}">
<div class="width_mm">
                                                               <input   name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 11 ||  prop.fieldtypeid == 1 || prop.fieldtypeid == 12  || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32"
                                                               class="form-control tabswap1" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)" (keypress)="validationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected);" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               <input   name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 11 ||  prop.fieldtypeid == 1 || prop.fieldtypeid == 12 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32"
                                                               class="form-control tabswap2" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="number" step=".01" aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)" (keyup)="tabkeyupvalidate($event)" (keypress)="tabvalidationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>

                                                               <input name="ordertext{{i}}"
                                                                  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }"
                                                                  [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}" *ngSwitchCase="prop.fieldtypeid == 28"
                                                                  class="form-control tabswap1" type="text"
                                                                  aria-autocomplete="none" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" [formControlName]="prop.fieldid"
                                                                  (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)"
                                                                  (keypress)="validationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected);"
                                                                  [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''"
                                                                  [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />
                                                               <input name="ordertext{{i}}"
                                                                  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }"
                                                                  [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}" *ngSwitchCase="prop.fieldtypeid == 28"
                                                                  class="form-control tabswap2" type="number" step=".01"
                                                                  aria-autocomplete="none" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" [formControlName]="prop.fieldid"
                                                                  (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)"
                                                                  (keyup)="tabkeyupvalidate($event)"
                                                                  (keypress)="tabvalidationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)"
                                                                  [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''"
                                                                  [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />

                                                               <input   name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 14"
                                                               class="form-control tabswap1" (input)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="numberPastedata($event)"  (keypress)="numberonlyvalidationdata($event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />
                                                               <input   name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 14"
                                                               class="form-control tabswap2" (input)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="number" step=".01" aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="numberPastedata($event)" (keyup)="tabkeyupvalidate($event)" (keypress)="tabnumberonlyvalidationdata($event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"  />

                                                               <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 29"
                                                               class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid"  [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               <!--EDI setup-->
                                                               <ng-container *ngIf="edishowhideField(prop)">
                                                               <input   name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 6"
                                                               class="form-control tabswap1" (blur)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)" (keypress)="validationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected);" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               <input   name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 6"
                                                               class="form-control tabswap2" (blur)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="number" step=".01" aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)" (keyup)="tabkeyupvalidate($event)" (keypress)="tabvalidationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               </ng-container>
                                                               <!-- <ng-container *ngIf="edishowhideField(prop)">
                                                               <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 18"
                                                               class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  autocomplete="off"  [formControlName]="prop.fieldid" [ngStyle]="imageStyle(prop)" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               </ng-container> -->
                                                               <ng-container *ngIf="edishowhideField(prop)">
                                                                  <textarea   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 18"
                                                                  class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" [ngStyle]="imageStyle(prop)" [tabindex]="onllineaftersubmitordereditflag  ? '' : '-1'" ></textarea>
                                                               </ng-container>
                                                               <span *ngIf="!fractionshowhideflag">
                                                                  <span *ngSwitchCase="prop.fieldtypeid == 1 || prop.fieldtypeid == 11 || prop.fieldtypeid == 12 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32 || prop.fieldtypeid == 28">{{unittypevalue}}</span>
                                                               </span>


                                                            </div>
                                                            <span  *ngIf="!fractionshowhideflag" class="customflexbasisa">
                                                               <select [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="widthdropfraction.width"  *ngSwitchCase="(prop.fieldtypeid == 11 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8  || prop.fieldtypeid == 31) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" [class.bg_pinkColor]="globaleditPopup && selectWidth_DropColor(widthdropfraction.width)" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="widthfractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                            <option value="0">0</option>
                                                            <option *ngFor="let widthset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="widthset.id">{{widthset.name}}</option>
                                                         </select>
                                                         <select  [ngModelOptions]="{standalone: true}"  class="form-control"  [(ngModel)]="widthdropfraction.drop"  *ngSwitchCase="(prop.fieldtypeid == 12 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10  || prop.fieldtypeid == 32 ) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" [class.bg_pinkColor]="globaleditPopup && selectWidth_DropColor(widthdropfraction.drop)" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="dropfractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                            <option value="0">0</option>
                                                            <option *ngFor="let dropset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="dropset.id">{{dropset.name}}</option>
                                                         </select>
                                                         <select  [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="prop.blindswidth" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" *ngSwitchCase="(prop.fieldtypeid == 1) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="widthfractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">
                                                            <option value="0">0</option>
                                                            <option *ngFor="let widthset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="widthset.id">{{widthset.name}}</option>
                                                         </select>
                                                         <select  class="form-control" [formControlName]="prop.fieldid+'_'+prop.fieldname" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" *ngSwitchCase="(prop.fieldtypeid == 28) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="numberFractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">
                                                            <option value="0">0</option>
                                                         <option *ngFor="let numset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="numset.id">{{numset.name}}</option>
                                                         </select>
                                                            </span>
                                                      </div>
                                                            <div class="orderformalred">
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.fieldtypeid == dynamicwidthtypeid && inst['controls'][prop.fieldid]?.errors?.errors">{{widthminmaxvalue}}</h6>
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.fieldtypeid == dynamicdroptypeid && inst['controls'][prop.fieldid]?.errors?.errors">{{dropminmaxvalue}}</h6>
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.stock_not_available_name_array?.length">{{prop.stock_not_available_name_array.join(' , ')}} out of stock</h6>
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.fieldtypeid == 6 && inst['controls'][prop.fieldid]?.errors?.errors">{{inst['controls'][prop.fieldid]?.errors?.errors | translate}}</h6>
                                                            </div>
                                                            <select  [(ngModel)]="prop.optiondefault" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  [formControlName]="prop.fieldid" *ngSwitchCase="prop.fieldtypeid == 34 || prop.fieldtypeid == 13 || prop.fieldtypeid == 17 || prop.fieldtypeid == 30" class="form-control customeventkey" (change)="changeSelect(prop.fieldid,i,prop,$event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                               <option value="" *ngIf="prop.fieldtypeid != 34">{{'Select' | translate}}</option>
                                                               <option *ngFor="let option of prop.optionsvalue;trackBy:tracker;" [value]="option.optionid"> {{ option.optionname | translate}} </option>

                                                         </select>

                                                         <!-- Location view input and select start-->

                                                         <div class="btn-group dropdown location float-none position-static w-100" id="subgrid{{i}}"
                                                            *ngIf="prop.fieldtypeid == 4" #dropdownElement>
                                                            <input id="subgrid{{i}}" name="ordertext{{i}}" class="form-control" [formControlName]="prop.fieldid" type="text"
                                                               aria-autocomplete="none" aria-haspopup="true" aria-expanded="false" [(ngModel)]="searchTerm"
                                                               [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''"
                                                               (input)="onLocationSearchChange($event,prop.optionsvalue,prop)"
                                                               [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }"
                                                               data-toggle="dropdown" aria-controls="dropdownMenu">

                                                            <button type="button" class="btn dropdown-toggle w-auto" id="dropdownMenuButton" data-toggle="dropdown"
                                                               aria-haspopup="true" aria-expanded="false" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)"
                                                               (click)="toggleLocation()">
                                                               <span><i class="fas fa-chevron-down"></i></span>
                                                            </button>
                                                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">

                                                               <ng-container *ngFor="let option of listOfLocations;trackBy:tracker;">
                                                                  <button type="button" class="dropdown-item" href="#" [value]="option.optionid"
                                                                     (click)="changeSelect(prop.fieldid,i,prop,$event,option.optionid)">{{option.optionname |
                                                                     translate}}</button>
                                                               </ng-container>
                                                               <button type="button" class="Newaddbtn newloction px-0" (click)="fnAddSource(prop.fieldid)"><i
                                                                     class="fa fa-plus mr-1" aria-hidden="true"></i> Add new location</button>
                                                            </div>
                                                         </div>

                                                         <!-- Location view input and select end-->

                                                         <!-- <ng-multiselect-dropdown *ngSwitchCase="prop.fieldtypeid == 0 || prop.fieldtypeid == 4 || prop.fieldtypeid == 13 || prop.fieldtypeid == 17"
                                                         [ngClass]="{ 'validation': (inst['controls'][prop.fieldname]?.touched) && inst['controls'][prop.fieldname]?.errors?.required }"
                                                         id="subgrid{{i}}"  class="marketmulti1" [formControl]="prop.fieldname" placeholder="{{ 'Select' | translate }}" [settings]="dropdownSettings" [data]="prop.optionsvalue">
                                                         </ng-multiselect-dropdown> -->
                                                      </ng-container>
                                                      <!-- <div *ngIf="inst['controls'][prop.fieldname]?.errors" class="error-msg">
                                                         <div *ngIf="inst['controls'][prop.fieldname]?.errors.required">*</div>
                                                      </div> -->
                                                      <!-- <div class="error" *ngIf="(f.formGroup.get(prop.fieldname).dirty || f.formGroup.get(prop.fieldname).touched) && f.formGroup.get(prop.fieldname).invalid">
                                                         <p>{{ f.formGroup.get(prop.fieldname).errors | json }}</p>
                                                      </div> -->
                                                      <!-- <div id="ordersubgrid{{i}}" class="ordersubgrid">

                                                         <div class="listofdata">

                                                         </div>


                                                         <div class="tab-footer w-100 d-flex">
                                                            <button (click)="closesubgrid(i)" class="Newsavebtn greenbtn mr-2">Save</button>
                                                            <button (click)="closesubgrid(i)" class="Newcancelbtn">Cancel</button>
                                                         </div>

                                                      </div> -->

                                                   </div>
                                                </div>
                                                <div class="appenlist">
                                                   <!-- <ag-grid-angular style="width: 100%; height: 214px;" #agGrid class="ag-theme-alpine datalistoff" [rowData]="standarddata"
                                                   [floatingFiltersHeight]="floatingFiltersHeight" [rowMultiSelectWithClick]="true"
                                                      [rowHeight]="rowHeight" [headerHeight]="headerHeight" [columnDefs]="columnDefs" [defaultColDef]="defaultColDef"
                                                      [suppressRowClickSelection]="true" [rowSelection]="rowSelection" [modules]="modules" [rowDragManaged]="true"
                                                      [animateRows]="true" [frameworkComponents]="frameworkComponents" [applyColumnDefOrder]="true"
                                                      [suppressPaginationPanel]="true"
                                                      [suppressDragLeaveHidesColumns]="true" [suppressMenuHide]="true" (gridReady)="onGridReady($event)">
                                                   </ag-grid-angular> -->
                                                </div>
                                             </div>
                                             <div class="col-sm-12 col-md-12 col-lg-6">
                                                <div class="row"  [ngClass]="{'iconwrapper': (prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22 || prop.fieldtypeid == 33) && (i >= orderlength) && (!onlineflag) && (edishowhideField(prop))}" [ngStyle]=" (onlineflag && prop.showFieldOnCustomerPortal) || (!onlineflag && prop.showfieldonjob) ? '' :{'display':'none'}" *ngFor="let prop of f.metaData; let i = index">
                                                   <div  class="col-md-4 col-lg-4 pr-0 d-flex align-items-center" *ngIf="i >= orderlength" >
                                                      <!-- <label [attr.for]="prop">{{ prop.fieldname }}<span *ngIf="prop.mandatory" style="color: red;">*</span></label> -->
                                                      <ng-container id="labelcontainer" [ngSwitch]="true" style="display: flex;">
                                                         <label class="edit_job_popup_label" [attr.for]="prop" *ngSwitchCase="prop.fieldtypeid != 3 && prop.fieldtypeid != 6 && prop.fieldtypeid != 18 && prop.fieldtypeid != 28">{{ prop.fieldname}}<span *ngIf="prop.mandatory" style="color: red;">*</span></label>
                                                            <span *ngIf="prop.fieldInformation !== '' && prop.fieldInformation !== null">
                                                               <ejs-tooltip id="tooltip" content="{{breakLines(prop.fieldInformation)}}" tipPointerPosition="RightCenter" closeDelay="500" cssClass='customtooltip'>
                                                                  <i id="info-icon" *ngSwitchCase="prop.fieldtypeid != 3 && prop.fieldtypeid != 6 && prop.fieldtypeid != 18 && prop.fieldtypeid != 28" class="fa fa-info-circle" aria-hidden="true"></i>
                                                               </ejs-tooltip>
                                                            </span>

                                                         <!--EDI setup-->
                                                         <ng-container *ngIf="edishowhideField(prop)">
                                                         <label class="edit_job_popup_label" [attr.for]="prop" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 6 || prop.fieldtypeid == 18 || prop.fieldtypeid == 28">{{ prop.fieldname}}<span *ngIf="prop.mandatory" style="color: red;">*</span></label>
                                                            <span *ngIf="prop.fieldInformation !== '' && prop.fieldInformation !== null ">
                                                               <ejs-tooltip id="tooltip" content="{{breakLines(prop.fieldInformation)}}" tipPointerPosition="RightCenter" closeDelay="500" cssClass='customtooltip'>
                                                                  <i id="info-icon" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 6 || prop.fieldtypeid == 18 || prop.fieldtypeid == 28" class="fa fa-info-circle" aria-hidden="true"></i>
                                                               </ejs-tooltip>
                                                            </span>
                                                         </ng-container>
                                                      </ng-container>
                                                   </div>
                                                   <div class="col-md-7 col-lg-8" *ngIf="i >= orderlength" [ngClass]="{'choose_fab': selectioncategory == 6 && prop.fieldtypeid =='22' && prop.fabricorcolor ==1 }" id="spinnerId{{prop.fieldid}}">
                                                      <ng-container id="container" [ngSwitch]="true">

                                                         <!-- <input (paste)="Pastedata($event)" (keypress)="validationdata($event)" name="ordertext{{i}}" [ngClass]="{ 'validation': (inst['controls'][prop.fieldname]?.touched) && inst['controls'][prop.fieldname]?.errors?.required }" (change)="passwidthdropvalue($event,prop,i,prop.fieldname)" id="subgrid{{i}}" *ngSwitchCase="prop.fieldtypeid == 18" class="form-control"  [formControlName]="prop.fieldname"  type="text"  autocomplete="off" /> -->
                                                         <div class="" [ngClass]="prop.issubfabric || (category == 6 && prop?.multiseq > 1) ? 'w-100' : 'add_in 22'">
                                                         <!-- <input  readonly  id="subgrid{{i}}" name="ordertext{{i}}" (keypress)="orderformkeyvalidation($event,prop.fieldid,i,prop)"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched && inst['controls'][prop.fieldid]?.errors?.required) || prop?.stock_not_available_err }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 2 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22  || prop.fieldtypeid == 33"
                                                            class="form-control dropdown-toggle" [formControlName]="prop.fieldid" type="text"  aria-autocomplete="none"  (click)="supcomponentfn($event,prop.fieldid,i,prop)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">

                                                            <div  id="subgrid{{i}}"   *ngSwitchCase="prop.fieldtypeid == 2 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22  || prop.fieldtypeid == 33" class="dropdown">
                                                            <button tabindex="-1" class="btn dropdown-toggle" type="button" (click)="supcomponentfn($event,prop.fieldid,i,prop)" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" [disabled]="prop.ruleoverride==0 ? true : false"><i class="fas fa-chevron-down"></i></button>
                                                         </div> -->
                                                         <div *ngSwitchCase="prop.fieldtypeid == 2 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22 || prop.fieldtypeid == 33  " id="comboGridCover{{prop.fieldid}}" class="position-relative">
                                                             <app-combrogrid  #combogridchild (actionTriggered)="handleAction($event)" [form]="inst" [forms]="forms" [index]="i" [res]="prop" [staticArrayData]="staticArrayData"  [disableFields]="disableFields" [loadingIndex]="loadingIndex" [rulesBaseDisableSave]="rulesBaseDisableSave" [onllineaftersubmitordereditflag]="onllineaftersubmitordereditflag"></app-combrogrid>

                                                         </div>

                                                         <!--EDI setup-->
                                                         <ng-container *ngIf="edishowhideField(prop)">
                                                            <div *ngSwitchCase="prop.fieldtypeid == 3" id="comboGridCover{{prop.fieldid}}" class="position-relative">
                                                                <app-combrogrid  #combogridchild  (actionTriggered)="handleAction($event)" [form]="inst" [forms]="forms" [index]="i" [res]="prop" [staticArrayData]="staticArrayData" [loadingIndex]="loadingIndex"  [disableFields]="disableFields" [rulesBaseDisableSave]="rulesBaseDisableSave" [onllineaftersubmitordereditflag]="onllineaftersubmitordereditflag"></app-combrogrid>
                                                            </div>

                                                            <!-- <input  readonly  id="subgrid{{i}}" name="ordertext{{i}}" (keypress)="orderformkeyvalidation($event,prop.fieldid,i,prop)"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched && inst['controls'][prop.fieldid]?.errors?.required) || prop?.stock_not_available_err }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 3 "
                                                            class="form-control dropdown-toggle" [formControlName]="prop.fieldid" type="text"  aria-autocomplete="none"  (click)="supcomponentfn($event,prop.fieldid,i,prop)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">
                                                            <div  id="subgrid{{i}}"   *ngSwitchCase="prop.fieldtypeid == 3 " class="dropdown">
                                                            <button tabindex="-1" class="btn dropdown-toggle" type="button" (click)="supcomponentfn($event,prop.fieldid,i,prop)" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" [disabled]="prop.ruleoverride==0 ? true : false"><i class="fas fa-chevron-down"></i></button>
                                                         </div> -->
                                                         </ng-container>

                                                         </div>


                                                         <div class="add ml-2" *ngIf="selectioncategory == 6 && prop.fieldtypeid =='22' && prop.fabricorcolor ==1 && !(prop.issubfabric) && prop.multiseq == 1">
                                                            <button type="button" class="Newsavebtn" id="materialPopupButton" (click)="materialpopup()" (focus)="onOpenPanel = true " (blur)="onOpenPanel = false">
                                                               <span ><i class="fa fa-plus" aria-hidden="true"></i></span>
                                                               {{'add' | translate}}
                                                            </button>
                                                         </div>


                                                         <div class="add ml-2 hovereditbuttonhideshow" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || (prop.fieldtypeid == 22 && prop.multiseq == 1)  || prop.fieldtypeid == 33">
                                                            <i class="fas fa-pencil-alt penicon text-right" (click)="editfabricoption($event,i,prop)"></i>
                                                      </div>


                                                         <div id="sublevelgrid{{i}}" class="sublevelpopup">
                                                            {{'subpopup...' | translate}}
                                                         </div>
                                                          <div  class="loading_spinner" >
                                                                     <div class="spinner-border spinner-border-sm mb-2 ml-2" role="status">
                                                                     </div>
                                                                  </div>
                                                         <!-- <div class="dx-viewport" *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22">
                                                            <dx-drop-down-box [value]="getValue(prop.dumydata)" valueExpr="optionid"
                                                            displayExpr="optionname" placeholder="Select a value..."
                                                            [showClearButton]="false" [dataSource]="prop.optionsvalue" (click)="onorderdropdownedit($event,prop.fieldname,i,prop)">
                                                               <div *dxTemplate="let data of 'content'">
                                                                  <dx-data-grid
                                                                  (onSelectionChanged)="exampleModalbk($event,i)"
                                                                  [dataSource]="prop.optionsvalue"
                                                                  (onSelectionChanged)="selectionChanged($event,i)"
                                                                  [allowColumnReordering]="true" [allowColumnResizing]="true"
                                                                  (onRowUpdated)="logEvent($event)"
                                                                  [(selectedRowKeys)]="prop.dumydata">
                                                                  <dxo-selection mode="multiple"></dxo-selection>
                                                                  <dxo-filter-row [visible]="true"></dxo-filter-row>
                                                                  <dxi-column type="buttons">
                                                                     <dxi-button [onClick]="onorderedit" [visible]="true" icon="edit" name="edit"></dxi-button>
                                                                  </dxi-column>
                                                                  <dxi-column [allowEditing]="false" *ngFor="let col of dxcolarray" dataField={{col}}></dxi-column>
                                                                  <dxo-editing mode="cell" [allowUpdating]="true"></dxo-editing>
                                                                  </dx-data-grid>
                                                               </div>
                                                            </dx-drop-down-box>
                                                            <input type="button" (click)="deleteRecords()" [disabled]="!selectedItemKeys.length" value="Delete Selected Records">
                                                         </div> -->

                                                         <input  (paste)="Pastedata($event)"  (keypress)="validationdata($event)" name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" id="subgrid{{i}}"  *ngSwitchCase="'email'" class="form-control" type="email"   [formControlName]="prop.fieldid" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />

                                                         <textarea  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="'textarea'" class="form-control"  [value]="prop.value" [formControlName]="prop.fieldid" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"></textarea>
                                                         <div [ngClass]="{'inchescustomstyle': (prop.fieldtypeid == 1 || prop.fieldtypeid == 11 || prop.fieldtypeid ==12  || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32 ||  prop.fieldtypeid == 28) &&  unittypevaluehideshow=='Inches'  && inchfractionselected !=3}">
                                                            <div class="width_mm">
                                                               <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 11 ||  prop.fieldtypeid == 1 || prop.fieldtypeid == 12 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32"
                                                               class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="Pastedata($event)" (keypress)="validationdata($event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>

                                                               <input   name="ordertext{{i}}"
                                                                  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }"
                                                                  [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 28"
                                                                  class="form-control" type="text"
                                                                  aria-autocomplete="none" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" [formControlName]="prop.fieldid"
                                                                  (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)"
                                                                  (keypress)="validationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected);"
                                                                  [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''"
                                                                  [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               <input name="ordertext{{i}}"
                                                                  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }"
                                                                  [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}" *ngSwitchCase="prop.fieldtypeid == 28"
                                                                  class="form-control tabswap2" type="number" step=".01"
                                                                  aria-autocomplete="none" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" [formControlName]="prop.fieldid"
                                                                  (paste)="Pastedata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)"
                                                                  (keyup)="tabkeyupvalidate($event)"
                                                                  (keypress)="tabvalidationdata($event,prop.fieldtypeid,unittypevaluehideshow,inchfractionselected)"
                                                                  [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''"
                                                                  [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />

                                                               <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 14"
                                                               class="form-control" (input)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="numberPastedata($event)"  (keypress)="numberonlyvalidationdata($event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />

                                                               <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 29"
                                                               class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               <!--EDI setup-->
                                                               <ng-container *ngIf="edishowhideField(prop)">
                                                               <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required || inst['controls'][prop.fieldid]?.errors?.errors }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 6"
                                                               class="form-control" (blur)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid" (paste)="Pastedata($event)" (keypress)="validationdata($event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'"/>
                                                               </ng-container>
                                                               <!-- <ng-container *ngIf="edishowhideField(prop)">
                                                                  <input   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 18"
                                                                  class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  autocomplete="off"  [formControlName]="prop.fieldid" [ngStyle]="imageStyle(prop)" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" />
                                                               </ng-container> -->
                                                               <ng-container *ngIf="edishowhideField(prop)">
                                                                  <textarea   name="ordertext{{i}}"  [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  *ngSwitchCase="prop.fieldtypeid == 18"
                                                                  class="form-control" (change)="passwidthdropvalue($event,prop,i,prop.fieldid)" type="text"  aria-autocomplete="none"  [formControlName]="prop.fieldid"  [ngStyle]="imageStyle(prop)" [tabindex]="onllineaftersubmitordereditflag  ? '' : '-1'"></textarea>
                                                                  </ng-container>
                                                                  <span *ngIf="!fractionshowhideflag">
                                                                     <span *ngSwitchCase="prop.fieldtypeid == 1 || prop.fieldtypeid == 11 || prop.fieldtypeid == 12 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10 || prop.fieldtypeid == 31 || prop.fieldtypeid == 32 || prop.fieldtypeid == 28">{{unittypevalue | translate}}</span>
                                                                  </span>



                                                            </div>
                                                            <span *ngIf="!fractionshowhideflag" class="customflexbasisa">
                                                               <select  [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="prop.blindswidth" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" *ngSwitchCase="(prop.fieldtypeid == 1) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="widthfractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'">
                                                                  <option value="0">0</option>
                                                               <option *ngFor="let widthset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="widthset.id">{{widthset.name}}</option>
                                                               </select>
                                                               <select [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="widthdropfraction.width" [class.bg_pinkColor]="globaleditPopup && selectWidth_DropColor(widthdropfraction.width)"  *ngSwitchCase="(prop.fieldtypeid == 11 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8  || prop.fieldtypeid == 31) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="widthfractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                                  <option value="0">0</option>
                                                               <option *ngFor="let widthset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="widthset.id">{{widthset.name}}</option>
                                                               </select>
                                                               <select  [ngModelOptions]="{standalone: true}"  class="form-control"  [(ngModel)]="widthdropfraction.drop" [class.bg_pinkColor]="globaleditPopup && selectWidth_DropColor(widthdropfraction.drop)"  *ngSwitchCase="(prop.fieldtypeid == 12 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10  || prop.fieldtypeid == 32 ) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="dropfractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                                  <option value="0">0</option>
                                                               <option *ngFor="let dropset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="dropset.id">{{dropset.name}}</option>
                                                               </select>
                                                               <select  class="form-control"  [formControlName]="prop.fieldid+'_'+prop.fieldname" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" *ngSwitchCase="(prop.fieldtypeid == 28) && unittypevaluehideshow=='Inches' && inchfractionselected !=3" (change)="changeSelect(prop.fieldid,i,prop,$event)" name="numberFractionset" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                                  <option value="0">0</option>
                                                               <option *ngFor="let numset of Measurementarray;let i=index;trackBy:fractiontracker;" [value]="numset.id">{{numset.name}}</option>
                                                               </select>
                                                            </span>
                                                            </div>
                                                            <div class="orderformalred" *ngIf="!fractionshowhideflag">
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.fieldtypeid == dynamicwidthtypeid && inst['controls'][prop.fieldid]?.errors?.errors">{{widthminmaxvalue}}</h6>
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.fieldtypeid == dynamicdroptypeid && inst['controls'][prop.fieldid]?.errors?.errors">{{dropminmaxvalue}}</h6>
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.stock_not_available_name_array?.length">{{prop.stock_not_available_name_array.join(' , ')}} out of stock</h6>
                                                               <h6 class="validationtext m-0 p-0" *ngIf="prop.fieldtypeid == 6 && inst['controls'][prop.fieldid]?.errors?.errors">{{inst['controls'][prop.fieldid]?.errors?.errors | translate}}</h6>
                                                            </div>
                                                            <select  [(ngModel)]="prop.optiondefault" [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)" id="subgrid{{i}}"  [formControlName]="prop.fieldid" *ngSwitchCase="prop.fieldtypeid == 34 || prop.fieldtypeid == 13 || prop.fieldtypeid == 17 || prop.fieldtypeid == 30" class="form-control" (change)="changeSelect(prop.fieldid,i,prop,$event)" [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''" [tabindex]="(!onllineaftersubmitordereditflag  || prop.ruleoverride ==0 ) ? '-1' : '0'" >
                                                               <option value="">{{'Select' | translate}}</option>
                                                               <option *ngFor="let option of prop.optionsvalue;trackBy:tracker;" [value]="option.optionid"> {{ option.optionname | translate}} </option>

                                                         </select>

                                                         <!-- Location view input and select start-->

                                                         <div class="btn-group dropdown location float-none position-static w-100" id="subgrid{{i}}"
                                                            *ngIf="prop.fieldtypeid == 4" #dropdownElement>
                                                            <input id="subgrid{{i}}" name="ordertext{{i}}" class="form-control" [formControlName]="prop.fieldid" type="text"
                                                               aria-autocomplete="none" aria-haspopup="true" aria-expanded="false" [(ngModel)]="searchTerm"
                                                               [ngStyle]="prop.ruleoverride==0 ? {'pointer-events': 'none','background-color': '#e1e1e180'} : ''"
                                                               (input)="onLocationSearchChange($event,prop.optionsvalue,prop)"
                                                               [ngClass]="{ 'validation': (inst['controls'][prop.fieldid]?.touched) && inst['controls'][prop.fieldid]?.errors?.required }"
                                                               data-toggle="dropdown" aria-controls="dropdownMenu">

                                                            <button type="button" class="btn dropdown-toggle w-auto" id="dropdownMenuButton" data-toggle="dropdown"
                                                               aria-haspopup="true" aria-expanded="false" [class.bg_pinkColor]="globaleditPopup && selectColor(prop)"
                                                               (click)="toggleLocation()">
                                                               <span><i class="fas fa-chevron-down"></i></span>
                                                            </button>
                                                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                                               <ng-container *ngFor="let option of listOfLocations;trackBy:tracker;">
                                                                  <button type="button" class="dropdown-item" href="#" [value]="option.optionid"
                                                                     (click)="changeSelect(prop.fieldid,i,prop,$event,option.optionid)">{{option.optionname |
                                                                     translate}}</button>
                                                               </ng-container>
                                                               <button type="button" class="Newaddbtn newloction px-0" (click)="fnAddSource(prop.fieldid)"><i
                                                                     class="fa fa-plus mr-1" aria-hidden="true"></i> Add new location</button>
                                                            </div>
                                                         </div>

                                                         <!-- Location view input and select end-->

                                                         <!-- <ng-multiselect-dropdown *ngSwitchCase="prop.fieldtypeid == 0 || prop.fieldtypeid == 4 || prop.fieldtypeid == 13 || prop.fieldtypeid == 17"
                                                         [ngClass]="{ 'validation': (inst['controls'][prop.fieldname]?.touched) && inst['controls'][prop.fieldname]?.errors?.required }"
                                                         id="subgrid{{i}}"  class="marketmulti1" [formControl]="prop.fieldname" placeholder="{{ 'Select' | translate }}" [settings]="dropdownSettings" [data]="prop.optionsvalue">
                                                         </ng-multiselect-dropdown> -->
                                                      </ng-container>
                                                      <!-- <div class="error" *ngIf="(f.formGroup.get(prop.fieldname).dirty || f.formGroup.get(prop.fieldname).touched) && f.formGroup.get(prop.fieldname).invalid">
                                                         <p>{{ f.formGroup.get(prop.fieldname).errors | json }}</p>
                                                      </div> -->
                                                      <div id="ordersubgrid{{i}}" class="ordersubgrid">

                                                   <div class="sublistpp">

                                                   </div>

                                                         <!-- <ag-grid-angular style="width: 100%; height: 214px;" #agGrid class="ag-theme-alpine" [rowData]="standarddata"
                                                         [floatingFiltersHeight]="floatingFiltersHeight" [rowMultiSelectWithClick]="true"
                                                            [rowHeight]="rowHeight" [headerHeight]="headerHeight" [columnDefs]="columnDefs" [defaultColDef]="defaultColDef"
                                                            [suppressRowClickSelection]="true" [rowSelection]="rowSelection" [modules]="modules" [rowDragManaged]="true"
                                                            [animateRows]="true" [frameworkComponents]="frameworkComponents" [applyColumnDefOrder]="true"
                                                            [suppressPaginationPanel]="true" (firstDataRendered)="fire($event)"
                                                            [suppressDragLeaveHidesColumns]="true" [suppressMenuHide]="true" (gridReady)="onGridReady($event)">
                                                         </ag-grid-angular> -->


                                                         <div class="tab-footer w-100 d-flex">
                                                            <button (click)="closesubgrid(i)" class="Newsavebtn greenbtn mr-2">{{'Save' | translate}}</button>
                                                            <button (click)="closesubgrid(i)" class="Newcancelbtn">{{'Cancel' | translate}}</button>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                             <!-- <div class="col-md-5">
                                                <label [attr.for]="prop">{{ prop.fieldname | titlecase }}</label>
                                             </div>
                                             <div class="col-md-7">
                                                <ng-container id="container" [ngSwitch]="true">
                                                   <input *ngSwitchCase="prop.fieldtypeid == 18" class="form-control" [formControlName]="prop.fieldname"  type="text"  autocomplete="off" />

                                                   <input *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22"
                                                      class="form-control" [formControlName]="prop.fieldname" type="text"  autocomplete="off" data-toggle="modal" data-target="#exampleModalbk" (click)="supcomponentfn(prop.fieldname,i,prop)" />

                                                   <div *ngSwitchCase="prop.fieldtypeid == 3 || prop.fieldtypeid == 5 || prop.fieldtypeid == 19 || prop.fieldtypeid == 20 || prop.fieldtypeid == 21 || prop.fieldtypeid == 22" class="dropdown">
                                                      <button class="btn dropdown-toggle" type="button" data-toggle="modal" data-target="#exampleModalbk" (click)="supcomponentfn(prop.fieldname,i,prop)"><i class="fas fa-chevron-down"></i></button>
                                                   </div>

                                                   <input *ngSwitchCase="'email'" class="form-control" type="email"  [value]="prop.value" [formControlName]="prop.fieldname" />

                                                   <textarea rows="1"  *ngSwitchCase="'textarea'" class="form-control extpandtextarea" (click)="commonfilter.textareafocus()"  [value]="prop.value" [formControlName]="prop.fieldname"></textarea>

                                                   <input *ngSwitchCase="prop.fieldtypeid == 11 || prop.fieldtypeid == 14 || prop.fieldtypeid == 1 || prop.fieldtypeid == 12 || prop.fieldtypeid == 6 || prop.fieldtypeid == 7 || prop.fieldtypeid == 8 || prop.fieldtypeid == 9 || prop.fieldtypeid == 10"
                                                      class="form-control" type="text"  autocomplete="off"  [value]="prop.value" [formControlName]="prop.fieldname" (paste)="Pastedata($event)" (keypress)="validationdata($event)" />

                                                   <select [formControlName]="prop.fieldname" *ngSwitchCase="prop.fieldtypeid == 4 || prop.fieldtypeid == 13 || prop.fieldtypeid == 17" class="form-control" (change)="selectedfieldfn($event,i,prop.fieldname)">
                                                      <option *ngFor="let option of prop.optionsvalue" [value]="option.optionid"> {{ option.optionname }} </option>
                                                   </select>
                                                </ng-container>
                                                <div class="error" *ngIf="(f.formGroup.get(prop.fieldname).dirty || f.formGroup.get(prop.fieldname).touched) && f.formGroup.get(prop.fieldname).invalid">
                                                   <p>{{ f.formGroup.get(prop.fieldname).errors | json }}</p>
                                                </div>
                                             </div> -->
                                          </div>
                                       </form>
                                    </div>
                                 </div>
                                 <div *ngIf="forms.length == 0">
                                    <!-- <label>{{'No Records Found' | translate}}</label>  as per selve and kumaravel instruction line was commanded-->
                                 </div>
                              </div>
                                 <!-- <button type="button" (click)="getcontentheight()">Check Height{{orderlength}}</button>
                                    <div id="container" class="row" style="height:100px;">
                                       <div class="child cc col-6" id="subdiv1" style="height:200px;overflow-y: auto;">
                                          <p *ngFor="let split of ordersplitarray; let i = index">
                                             <span *ngIf="i<orderlength">{{split.name}}</span>
                                          </p>
                                       </div>
                                       <div class="another-child cc col-6" id="subdiv2" style="height:200px;overflow-y: auto;">
                                          <p *ngFor="let split of ordersplitarray; let i = index">
                                             <span *ngIf="i >= orderlength">{{split.name}}</span>
                                          </p>
                                       </div>
                                 </div> -->
                           </div>

                           <div class="pl-0 middlecol rollerinfo pr-2 mt-0" *ngIf="(!onlineflag && !receipedisabledflag) && category == '6'">
                              <div class="leftslider">
                           <span class="txtless">{{'Show Less Quote Formulas' | translate}}</span>
                           <span class="txtmore">{{'Show more Quote Formulas' | translate}}</span>

                                          </div>
                              <div class="rightform d-flex">
                              <div class="quotesformulas">
                                 <span>{{'Quote Formulas' | translate}}</span>
                              </div>
                              <div class="px-3 formulaform">
                              <div class="col m-0">
                                 <div class="col p-0" *ngFor="let quote of orderproductiondata;let i=index;">
                                    <div class="row quoteformularow" *ngIf="quote.showhideflag == 1">
                                       <ng-container>
                                       <div *ngIf="quote.fs_displayonquoteformulas == 1" class="col-md-4 col-sm-12 d-flex align-items-center px-2 justify-content-end"><label class="quotelabel">{{quote.fs_variablename | translate}}</label></div>
                                          <div *ngIf="quote.fs_displayonquoteformulas == 1" class="col-md-3 px-sm-3 px-md-0 d-flex align-items-center  col-sm-6">
                                             <div class="position-relative">
                                                <input type="text" (change)="productionoverride($event,quote.fs_id)" [ngModelOptions]="{standalone: true}" autocomplete="off" [(ngModel)]="quote.pricevalue" [disabled]="quote.fs_overidevalue == 0 ? true : false" class="form-control"/>
                                                <span class="mmRight">{{quote.unittype | translate}}</span>
                                             </div>

                                             <!-- <input disabled type="text"  autocomplete="off" value="{{quote.pricevalue}}" class="form-control"/> -->
                                          </div>
                                          <div *ngIf="quote.fs_displayonquoteformulas == 1" class="col-md-5 col-sm-6 d-flex align-items-center pr-1"><input type="text"  autocomplete="off" disabled value="{{quote.pricecalvalue}}" id="flexbasis" class="form-control"/>
                                             <div class="rowaction  px-2 align-items-center">
                                                <div class="pincheck" matTooltip="Pin to Manufacturing"
                                                matTooltipPosition="below" style="cursor: pointer;" (click)="pinneddata(quote,'production')"></div>
                                                <div class="minusdelete" matTooltip="Remove to Quote Formula"
                                                matTooltipPosition="below" style="cursor: pointer;" (click)="unpinneddata(quote,'quote')">
                                                </div>
                                          </div>
                                          </div>

                                       </ng-container>

                                    </div>
                                    <!-- <div class="row quoteformularow">

                                       <div class="col-md-5 col-sm-12"><label>Fabric Mark Up %</label></div>
                                       <div class="col-md-2 px-sm-3 px-md-0  col-sm-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                                       <div class="col-md-3 col-sm-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                                       <div class="rowaction col-md-2 pl-0">
                                          <div class="pincheck" matTooltip="Pin to Quote Formula"
                                          matTooltipPosition="below" ></div>
                                          <div class="minusdelete" matTooltip="Remove to Quote Formula"
                                          matTooltipPosition="below" >
                                          </div>
                                    </div>
                                    </div>
                                    <div class="row quoteformularow">

                                       <div class="col-md-5 col-sm-12"><label>Fabric Mark Up %</label></div>
                                       <div class="col-md-2 px-sm-3 px-md-0  col-sm-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                                       <div class="col-md-3 col-sm-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                                       <div class="rowaction col-md-2 pl-0">
                                          <div class="pincheck" matTooltip="Pin to Quote Formula"
                                          matTooltipPosition="below" ></div>
                                          <div class="minusdelete" matTooltip="Remove to Quote Formula"
                                          matTooltipPosition="below" >
                                          </div>
                                    </div>
                                    </div>                                                                          -->

                                 </div>
                              </div>

                              </div>


                              </div>
                              <div class="slidercontrol" (click)="sliderforms()">
                                 <i class="fas fa-chevron-left"></i>
                                 </div>
                           </div>
                           </div>
                     </mat-tab>
                     <mat-tab label="{{'Production' | translate}}" *ngIf="!onlineflag && !receipedisabledflag">
                        <!-- <mat-tab-group animationDuration="0ms" class="respMatlabel" [(selectedIndex)]="productionindex" (selectedTabChange)="productiontabClick($event)">
                           <mat-tab label="Cost price">
                              <div class="rollerinfo rollerinfooverwrite ">

                                 <div class="measurement_child w-100">
                                    <div class="row">
                                       <div class="col-12">
                                          <div class="accordion" id="accordionExample">
                                             <div>
                                                <div class="" id="headingthree">
                                                   <div class="mb-0 row">
                                                      <div class="col-sm-3 col-md-3 pt-2 text-right">
                                                         <span class="ml-2">Material</span>
                                                         <i class="fas fa-caret-right ml-3" data-toggle="collapse"
                                                            data-target="#collapsethree" aria-expanded="true"
                                                            aria-controls="collapseOne"></i>
                                                      </div>
                                                      <div class="col-sm-5 col-md-7">
                                                         <input type="number" value="{{costpricevalue}}" disabled class="form-control" />
                                                         <div id="collapsethree"
                                                            class="collapse measurement_innerchild"
                                                            aria-labelledby="headingthree"
                                                            data-parent="#accordionExample">
                                                            <div class="ml-4">
                                                               <form novalidate=""
                                                                  class="ng-untouched ng-pristine ng-valid mt-2">
                                                                  <div class="row">
                                                                     <div class="col-md-6 col-sm-6">
                                                                        <span></span>
                                                                     </div>
                                                                     <div class="col-md-2 col-sm-2 p-0 text-center">
                                                                        <span>Qty</span>
                                                                     </div>
                                                                     <div class="col-md-4 col-sm-4 text-center">
                                                                        <span>Price</span>
                                                                     </div>
                                                                     </div>
                                                                  <div class="row" *ngFor="let order of ordercalculationarray;let i=index">
                                                                     <div class="col-md-6 col-sm-6">
                                                                        <span>{{order.name}}</span>
                                                                     </div>
                                                                     <div class="col-md-2 col-sm-2 p-0">
                                                                        <input type="text"  autocomplete="off" disabled value="{{order.quantity}}"
                                                                           class="form-control" />
                                                                     </div>
                                                                     <div class="col-md-4 col-sm-4">
                                                                        <input type="text"  autocomplete="off" disabled value="{{order.costprice}}"
                                                                           class="form-control" />
                                                                     </div>
                                                                  </div>
                                                               </form>
                                                            </div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                       <div></div>
                                    </div>
                                 </div>
                              </div>
                           </mat-tab>
                           <mat-tab label="Manufacturing">

                              <div class="rollerinfo rollerinfooverwrite">
                                 <div class="measurement_child w-100">
                                    <form novalidate="" class="ng-untouched ng-pristine ng-valid">
                                       <div class="row" *ngFor="let quote of orderproductiondata;let i=index;">
                                          <ng-container *ngIf="quote.pricevalue > 0">
                                             <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-3 text-right pt-2"><span>{{quote.fs_variablename}}</span></div>
                                             <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-3">
                                                <input type="text"  autocomplete="off" value="{{quote.pricevalue}}" disabled class="form-control" />
                                             </div>
                                             <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-4">
                                                <input type="text"  autocomplete="off" value="{{quote.pricecalvalue}}" disabled class="form-control" />
                                             </div>
                                          </ng-container>
                                       </div>
                                    </form>
                                 </div>
                              </div>
                           </mat-tab>
                        </mat-tab-group> -->
                        <div class="row d-none" [ngClass]="acceptanceflag ? '' : 'quoacceptance'" >
                           <div class="col-sm-12 col-md-6 col-lg-6 pr-lg-1">
                              <div class="rollerinfo rollerinfooverwrite ">
                                 <p class="d-flex my-3 col-9 justify-content-end">{{'Cost Price' | translate}}</p>
                                 <div class="measurement_child w-100">
                                    <div class="row m-0">
                                       <div class="col-12">
                                          <div class="mb-3 row">

                                             <div class="col ml-3">
                                                <!-- <span class="ml-2" style="font-weight:600">{{'Labour' | translate}}</span> -->
                                       <div id="innersub" class="measurement_innerchild">
                                                   <div class="">
                                                      <form novalidate=""
                                                         class="ng-untouched ng-pristine ng-valid mt-2">
                                                         <div class="row no-gutters innersubhead">
                                                            <div class="col-md-6 col-sm-6">
                                                               <span></span>
                                                            </div>
                                                            <div class="col-md-2 col-sm-2 p-0 text-center">
                                                               <span>{{'Qty' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-4 col-sm-4 text-center">
                                                               <span>{{'Price' | translate}}</span>
                                                            </div>
                                                            </div>
                                                         <!-- <div class="costpricesub">
                                                               <div class="row mx-2 no-gutters">
                                                                  <div class="col-md-6 col-sm-6">
                                                                     <span>Classic Scallops</span>
                                                                  </div>
                                                                  <div class="col-md-2 col-sm-2 p-0">
                                                                     <input type="text"  autocomplete="off" disabled value=""
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-4 col-sm-4">
                                                                     <input type="text"  autocomplete="off" disabled value=""
                                                                        class="form-control" />
                                                                  </div>
                                                               </div>
                                                               <div class="row mx-2 no-gutters">
                                                                  <div class="col-md-6 col-sm-6">
                                                                     <span>45mm Tube</span>
                                                                  </div>
                                                                  <div class="col-md-2 col-sm-2 p-0">
                                                                     <input type="text"  autocomplete="off" disabled value=""
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-4 col-sm-4">
                                                                     <input type="text"  autocomplete="off" disabled value=""
                                                                        class="form-control" />
                                                                  </div>
                                                               </div>
                                                            </div> -->
                                                                  <div class="costpricesub">
                                                               <div class="row no-gutters mx-2" *ngFor="let order of ordercalculationarray;let i=index">
                                                                  <div class="col-md-6 col-sm-6">
                                                                     <span>{{order.name | translate}}</span>
                                                                  </div>
                                                                  <div class="col-md-2 col-sm-2 p-0">
                                                                     <input type="text"  autocomplete="off" disabled value="{{order.quantity}}"
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-4 col-sm-4">
                                                                     <input type="text"  autocomplete="off" disabled value="{{order.costprice}}"
                                                                        class="form-control" />
                                                                  </div>
                                                               </div>
                                                            </div>
                                                         <div class="row innersubfooter no-gutters">
                                                            <div class="col-md-8 col-sm-8">
                                                               <span>{{'Total Cost of Price' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-4 col-sm-4 text-center">
                                                               <span>{{productiontotalcost | translate}}</span>
                                                            </div>
                                                            </div>
                                                      </form>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                          <div class="mb-3 row" *ngIf="calenderPriceList.length != 0 || workPriceList.length != 0 ">
                                             <div class="col ml-3 orderNewcard">
                                                <span class="ml-2 ordertypetitle">{{'Operations cost' | translate}}</span>
                                                <!--  -->
                                                <div id="innersub" class="measurement_innerchild" *ngIf="calenderPriceList.length != 0">
                                                   <div class="">
                                                      <form novalidate=""
                                                         class="ng-untouched ng-pristine ng-valid mt-2">
                                                         <div class="row  innersubhead">
                                                            <div class="col-md-5 col-sm-6">
                                                               <span class="pl-2 CalHeadList">{{'Calendar' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-2  col-sm-2">
                                                               <span>{{'Qty' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-2 col-sm-2">
                                                               <span>{{'Hrs/Min' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3">
                                                               <span>{{'Price' | translate}}</span>
                                                            </div>
                                                            </div>
                                                               <div class="costpricesub">
                                                               <div class="row  mx-2" *ngFor="let calender of calenderPriceList;let i=index">
                                                                  <div class="col-md-5 col-sm-6">
                                                                     <span>{{calender.name | translate}}</span>
                                                                  </div>
                                                                  <div class="col-md-2  pr-0 col-sm-2">
                                                                     <input type="text"  autocomplete="off" disabled value="{{calender.quantity}}"
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-2 pr-0 col-sm-2 ">
                                                                     <input type="text"  autocomplete="off" disabled value="{{calender['Hour/mins']}}"
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-3  pr-0 col-sm-3">
                                                                     <input type="text"  autocomplete="off" disabled value="{{calender.cost_price}}"
                                                                        class="form-control" />
                                                                        <span [ngClass]="calender.soft_delete ? 'costeditdisable' : 'costedit' "><i class="fa fa-pencil" aria-hidden="true"  (click)="editOperation(calender,'calender')"></i></span>
                                                                        <!-- <i class="fa fa-minus-circle" aria-hidden="true" (click)="unlinkOperation(calender,'calender')"></i> -->
                                                                  </div>

                                                               </div>
                                                            </div>
                                                         <div class="row innersubfooter m-0">
                                                            <div class="col-md-9 col-sm-9">
                                                               <span class="pl-2">{{'Total Cost of Price' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3">
                                                               <span class="tcost">{{this.totalCostPrice.calendar | translate}}</span>
                                                            </div>
                                                            </div>
                                                      </form>
                                                   </div>
                                                </div>

                                                <div id="innersub" class="measurement_innerchild" *ngIf="workPriceList.length != 0">
                                                   <div class="">
                                                      <form novalidate=""
                                                         class="ng-untouched ng-pristine ng-valid mt-2">
                                                         <div class="row  innersubhead">
                                                            <div class="col-md-5 col-sm-5">
                                                               <span class="CalHeadList pl-2">{{'Production app' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-2 col-sm-2 ">
                                                               <span>{{'Qty' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-2 col-sm-2">
                                                               <span>{{'Hrs/Min' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3">
                                                               <span>{{'Price' | translate}}</span>
                                                            </div>

                                                            </div>
                                                               <div class="costpricesub">
                                                               <div class="row  mx-2" *ngFor="let workroom of workPriceList;let i=index">
                                                                  <div class="col-md-5 col-sm-5">
                                                                     <span >{{workroom.name | translate}}</span>
                                                                  </div>
                                                                  <div class="col-md-2 pr-0 col-sm-2">
                                                                     <input type="text"  autocomplete="off" disabled value="{{workroom.quantity}}"
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-2 pr-0 col-sm-2 ">
                                                                     <input type="text"  autocomplete="off" disabled value="{{workroom['Hour/mins']}}"
                                                                        class="form-control" />
                                                                  </div>
                                                                  <div class="col-md-3 pr-0 col-sm-3">
                                                                     <input type="text"  autocomplete="off" disabled value="{{workroom.cost_price}}"
                                                                        class="form-control" />
                                                                        <span [ngClass]="workroom.soft_delete ? 'costeditdisable' : 'costedit' " > <i class="fa fa-pencil" aria-hidden="true" (click)="editOperation(workroom,'workroom')"></i></span>

                                                                        <!-- <i class="fa fa-minus-circle" aria-hidden="true" (click)="unlinkOperation(workroom,'workroom')"></i> -->
                                                                  </div>
                                                               </div>
                                                            </div>
                                                         <div class="row innersubfooter m-0">
                                                            <div class="col-md-9 col-sm-9">
                                                               <span class="pl-2"> {{'Total Cost of Price' | translate}}</span>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3">
                                                               <span class="tcost">{{this.totalCostPrice.workroom}}</span>
                                                            </div>
                                                            </div>
                                                      </form>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-sm-12 col-md-6 col-lg-6 pl-lg-0">
                              <div class="rollerinfo rollerinfooverwrite materialborder">
                                 <p class="d-flex my-3 col-9 justify-content-end">{{'Manufacturing' | translate}}</p>
                                 <div class="measurement_child w-100">
                                    <form novalidate="" class="ng-untouched ng-pristine ng-valid">
                                       <div class="row manufactrow m-auto" *ngFor="let quote of orderproductiondata;let i=index;">
                                          <ng-container *ngIf="quote.showhideflag == 1">
                                             <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-5 text-right manufacttext pt-2 pl-2"><span>{{quote.fs_variablename | translate}}</span></div>
                                             <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-3 d-flex pl-0 align-items-center manufactpriceinput">
                                             <div class="position-relative">
                                                <input type="text" (change)="productionoverride($event,quote.fs_id)" [ngModelOptions]="{standalone: true}" autocomplete="off" [(ngModel)]="quote.pricevalue" [disabled]="quote.fs_overidevalue == 0 ? true : false" class="form-control"  min="1" max="7" />
                                                <span>{{quote.unittype | translate}}</span>
                                             </div>
                                             </div>
                                             <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-4 manufactright d-flex align-items-center px-0">
                                                <input type="text"  autocomplete="off" value="{{quote.pricecalvalue}}" disabled class="form-control mr-1" />
                                                <div class="rowaction">
                                                   <div class="pincheck" matTooltip="Pin to Quote Formula"
                                                   matTooltipPosition="below" style="cursor: pointer;" (click)="pinneddata(quote,'quote')"></div>
                                                   <div class="minusdelete" matTooltip="Remove to Manufacturing"
                                                   matTooltipPosition="below" style="cursor: pointer;" (click)="unpinneddata(quote,'production')">
                                                   </div>
                                             </div>
                                             </div>
                                          </ng-container>
                                       </div>
                                       <!-- <div class="row manufactrow">
                                          <ng-container>
                                             <div  class="col-md-6 text-right pt-2"><span>quote.fs_variablename</span></div>
                                             <div  class="col-md-3 manufactpriceinput">
                                                <input type="text"  autocomplete="off" value="0" disabled class="form-control" />
                                                <span>mm</span>
                                             </div>
                                             <div class="col-md-3 manufactright px-0">
                                                <input type="text"  autocomplete="off" value="0" disabled class="form-control mr-1" />
                                                <div class="rowaction">
                                                   <div class="pincheck" matTooltip="Pin to Manufacturing"
                                                   matTooltipPosition="below" ></div>
                                                   <div class="minusdelete" matTooltip="Remove to Manufacturing"
                                                   matTooltipPosition="below" >
                                                   </div>
                                             </div>
                                             </div>

                                          </ng-container>
                                       </div> -->
                                    </form>
                                 </div>
                              </div>
                           </div>

                        </div>
                        <div class="production_material">
                           <!-- LA-I1921 case code starts here.We dynamically render production tab sections below based on this case requirement -->
                           <div *ngIf="getSectionIds().length == 0">
                              <div class="col-12 px-2 materials_sec">
                                 <div class="mt-3 Production_width">
                                    <div class="customborder" id="heightchanges">
                                       <div class="production_head">
                                          <h5 class="mb-0">{{"Materials info" | translate}}</h5>
                                       </div>
                                       <div class="production_content">
                                          <div class="measurement_child w-100">
                                          </div>
                                          <div class="totalcalc">
                                             <span class="">{{ 'Total cost :' | translate }}
                                                <span class="price">{{currencydetail?.bacs ? '': currencySymbole}} {{"0.00"}} {{currencydetail?.bacs ?
                                                   currencySymbole : ''}}</span>
                                             </span>
                                             <span class="ml-4">{{ 'Total selling :' | translate }}
                                                <span class="price">{{currencydetail?.bacs ? '': currencySymbole}} {{"0.00"}} {{currencydetail?.bacs ?
                                                   currencySymbole : ''}}</span>
                                             </span>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div *ngIf="getSectionIds().length > 0">
                           <div class="col-12 px-2 materials_sec" [ngClass]="acceptanceflag ? '' : 'quoacceptance'" *ngFor="let section of getSectionIds()">
                              <div class="mt-3 Production_width" *ngIf="section=='Materials'">
                                 <div class="customborder" id="heightchanges">
                                    <div class="production_head">
                                       <h5 class="mb-0">{{"Materials info" | translate}}</h5>
                                    </div>
                                    <div class="production_content" [ngStyle]="{'pointer-events':disableFields?'none':''}" (keydown)="blockKeyboardEvents($event)">
                                       <div class="measurement_child w-100">
                                          <div class="row m-0 price_head">
                                             <div class="col-md-4"></div>
                                             <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >0">
                                                <h6>Cost</h6>
                                             </div>
                                             <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >0">
                                                <h6>Selling</h6>
                                             </div>
                                             <div class="col-md-4"></div>
                                             <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >1">
                                                <h6>Cost</h6>
                                             </div>
                                             <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >1">
                                                <h6>Selling</h6>
                                             </div>
                                          </div>
                                          <form novalidate="" class="ng-untouched customform ng-pristine ng-valid" *ngIf="materialList.length != 0">
                                             <ng-container *ngFor="let quote of groupedData[section];let i=index;" >
                                                <div class="col d-flex manufactrow px-0" *ngIf="quote.fs_displayonproduction == 1 && quote.showhideflag == 1" >
                                                   <!-- *ngIf="(quote.fs_bom == 1 && quote.showhideflag == 1)"  && quote.showhideflag == 1 [ngClass]="quote.showhideflag == 0 ? 'manufactrowhide':''" -->
                                                   <div class="addcustomdiv d-flex" *ngIf=" quote.fs_displayonproduction == 1">
                                                      <!-- <ng-container *ngIf="quote.showhideflag == 1"> -->
                                                      <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-4 pl-2 text-left manufacttext"><span class="flexbasisv" matTooltipPosition="below" matTooltip="{{quote.fs_variablename}}">{{quote.fs_variablename | translate}}</span></div>

                                                      <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-2 d-flex pl-0 align-items-center manufactpriceinput ">
                                                      <div class="textfield">
                                                         <input
                                                         *ngIf=" (quote.pricevalue != '' || quote.fs_overidevalue != 0)  && (costpricecomesfrom == '1' || quote.fs_bom == '1') && quote.priceComesFormFlag ==undefined && costpricecomesfrom != '3'" type="text" (change)="productionoverride($event,quote.fs_id)" [ngModelOptions]="{standalone: true}" autocomplete="off" [(ngModel)]="quote.pricevalue" [disabled]="quote.fs_overidevalue == 0 ? true : false" class="form-control"  min="1" max="7" matTooltipPosition="below" matTooltip="{{quote.pricevalue}}" />
                                                         <!--  -->
                                                         <input  *ngIf="quote.quantity != undefined && (costpricecomesfrom == '2' || costpricecomesfrom == '3') && quote.priceComesFormFlag ==undefined && costpricecomesfrom != '3'"  type="text" (change)="productionoverride($event,quote.fs_id)" [ngModelOptions]="{standalone: true}" autocomplete="off" [(ngModel)]="quote.quantity" [disabled]="quote.fs_overidevalue == 0 ? true : false" class="form-control"  min="1" max="7" matTooltipPosition="below" matTooltip="{{quote.quantity}}" />
                                                         <!--  -->
                                                         <input *ngIf="costpricecomesfrom == '3' || quote.priceComesFormFlag"  type="text"
                                                         (change)="productionoverride($event,quote.fs_id)"
                                                         [ngModelOptions]="{standalone: true}" autocomplete="off"
                                                         [(ngModel)]="quote.quantity != undefined ? quote.quantity : quote.pricevalue"
                                                         [disabled]="quote.fs_overidevalue == 0 || quote.battenstype == 0 ? true : false"
                                                         class="form-control"  min="1" max="7" matTooltipPosition="below"
                                                         [matTooltip]="quote.quantity != undefined ? quote.quantity : quote.pricevalue" />

                                                         <!-- <input  *ngIf="quote.priceComesFormFlag"  type="text" (change)="productionoverride($event,quote.fs_id)" [ngModelOptions]="{standalone: true}" autocomplete="off" [(ngModel)]="quote.pricevalue" [disabled]="quote.fs_overidevalue == 0 ? true : false" class="form-control"  min="1" max="7" matTooltipPosition="below" matTooltip="{{quote.quantity}}" /> -->
                                                      </div>
                                                      </div>
                                                      <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-2 text-right pl-0 d-flex align-items-center manufacttext ">
                                                         <div class=""><input type="text" disabled class="form-control text-center input-width" matTooltipPosition="below" matTooltip="{{quote.unittype}}" value="{{quote.unittype}}"></div>
                                                      </div>
                                                      <div *ngIf="quote.fs_displayonproduction == 1"
                                                               class="col-md-2 manufacttext pl-0 d-flex align-items-center">
                                                               <input type="text" autocomplete="off" matTooltipPosition="below"
                                                                  matTooltip="{{quote.costPrice}}" [value]="currencysetPosition(quote.costPrice)"
                                                                  disabled class="form-control mr-1" />
                                                            </div>
                                                      <div *ngIf="quote.fs_displayonproduction == 1"
                                                      class="col-md-2 manufactright d-flex align-items-center  px-0 pr-2">
                                                         <input type="text"  autocomplete="off" matTooltipPosition="below"
                                                         matTooltip="{{quote.sellingprice}}" [value]="currencysetPosition(quote.sellingprice)" disabled
                                                         class="form-control mr-1" />
                                                         <div class="rowaction">
                                                            <i class="fas fa-pencil-alt penicon pincheck p-2"  style="cursor: pointer;"
                                                            *ngIf="((quote.fs_formula != '' && quote.fs_formula != '0' && quote.fs_formula != 'noFormula') && (costpricecomesfrom == '1' || netpricecomesfrom == '1')) || ((costpricecomesfrom == '2' || netpricecomesfrom == '1') && quote.fs_bom == 1) && quote.priceComesFormFlag ==undefined"
                                                            (click)="editFormula(quote,'quote')" matTooltipPosition="below"
                                                            matTooltip="Formula Edit"  style="cursor: pointer;"></i>
                                                      </div>
                                                      </div>
                                                   </div>
                                                </div>
                                             </ng-container>
                                          </form>
                                       </div>
                                       <div class="totalcalc">
                                          <span class="">{{'Total cost :' | translate}} <span class="price">{{currencydetail?.bacs ? '':
                                                currencySymbole}} {{sectionTotalCost[section]}} {{currencydetail?.bacs ? currencySymbole :
                                                ''}}</span></span>
                                          <span class="ml-4">{{'Total selling :' | translate}} <span class="price">{{currencydetail?.bacs ? '':
                                                currencySymbole}} {{sectionTotalSelling[section]}} {{currencydetail?.bacs ? currencySymbole :
                                                ''}}</span></span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           </div>
                           <div class="col-12 px-2 operation_sec" [ngClass]="acceptanceflag ? '' : 'quoacceptance'" *ngIf="calenderPriceList.length != 0 || workPriceList.length != 0">
                              <div class="mt-3  Production_width">
                                 <div class="customborder " id="heightchanges">
                                    <div class="production_head">
                                       <h5 class="mb-0">{{'Operations info' | translate}}</h5>
                                    </div>
                                    <div class="production_content" [ngStyle]="{'pointer-events':disableFields?'none':''}" (keydown)="blockKeyboardEvents($event)">
                                       <div class="measurement_child w-100">
                                          <div class="row m-0 price_head">
                                             <div class="col-md-4"></div>
                                             <div class="col-md-1 pl-0" *ngIf="calenderPriceList.length > 0|| workPriceList.length > 0">
                                                <h6>Cost</h6>
                                             </div>
                                             <div class="col-md-1 pl-0" *ngIf="calenderPriceList.length > 0|| workPriceList.length > 0">
                                                <h6>Selling</h6>
                                             </div>
                                             <div class="col-md-4"></div>
                                             <div class="col-md-1 pl-0"
                                                *ngIf="calenderPriceList.length > 1|| workPriceList.length > 1||(calenderPriceList.length == 1 && workPriceList.length == 1 )">
                                                <h6>Cost</h6>
                                             </div>
                                             <div class="col-md-1 pl-0"
                                                *ngIf="calenderPriceList.length > 1 || workPriceList.length > 1||(calenderPriceList.length == 1 && workPriceList.length == 1 )">
                                                <h6>Selling</h6>
                                             </div>
                                          </div>
                                          <form novalidate="" class="ng-untouched customform ng-pristine ng-valid">
                                             <div class="col d-flex manufactrow px-0" *ngFor="let calender of calenderPriceList;let i=index">
                                                <!-- *ngIf="(quote.fs_bom == 1 && quote.showhideflag == 1)"  -->
                                                <div class="addcustomdiv d-flex">
                                                   <!-- <ng-container *ngIf="quote.showhideflag == 1"> -->
                                                   <div class="col-md-4 text-left pl-2 manufacttext"><span class="flexbasisv " matTooltipPosition="below" matTooltip="{{calender.name}}">{{calender.name | translate}}</span></div>

                                                   <div  class="col-md-2 d-flex pl-0 align-items-center manufactpriceinput">
                                                   <div class="textfield">
                                                      <input  type="text"  [ngModelOptions]="{standalone: true}" autocomplete="off"
                                                      [(ngModel)]="calender.quantity" [disabled]="true" class="form-control"  min="1" max="7" />

                                                   </div>
                                                   </div>
                                                   <div class="col-md-2 text-right pl-0 d-flex align-items-center manufacttext ">
                                                      <div class=""><input type="text" disabled class="form-control text-center input-width"
                                                         matTooltipPosition="below" matTooltip="{{calender['Hour/mins']}}"
                                                         value="{{calender['Hour/mins']}}"></div>
                                                   </div>
                                                   <div class="col-md-2 manufacttext pl-0 d-flex align-items-center">
                                                      <input type="text" autocomplete="off"
                                                         value="{{currencydetail?.bacs ? '': currencySymbole}} {{calender.cost_price}} {{currencydetail?.bacs ? currencySymbole : ''}}"
                                                         matTooltipPosition="below" matTooltip="{{calender.cost_price}}" disabled
                                                         class="form-control mr-1" />
                                                   </div>
                                                   <div class="col-md-2 manufactright d-flex align-items-center px-0 pr-2">
                                                      <input type="text" autocomplete="off"
                                                         value="{{currencydetail?.bacs ? '': currencySymbole}} {{calender.markupprice?calender.markupprice:'0.00'}} {{currencydetail?.bacs ? currencySymbole : ''}}"
                                                         matTooltipPosition="below"
                                                         matTooltip="{{calender.markupprice?calender.markupprice:'0.00'}}"
                                                         disabled class="form-control mr-1" />
                                                      <div class="rowaction">
                                                         <i class="fas fa-pencil-alt penicon pincheck p-2" style="cursor: pointer;"
                                                            (click)="editOperation(calender,'calender')" matTooltipPosition="below"
                                                            matTooltip="Operation Edit" style="cursor: pointer;"></i>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                             <div class="col d-flex manufactrow px-0" *ngFor="let workroom of workPriceList;let i=index">
                                                <div class="addcustomdiv d-flex">
                                                   <div class="col-md-4 text-left pl-2 manufacttext"><span class="flexbasisv" matTooltip="{{workroom.name}}"
                                                      matTooltipPosition="below">{{workroom.name | translate}}</span></div>

                                                   <div  class="col-md-2 d-flex pl-0 align-items-center manufactpriceinput">
                                                   <div class="textfield">
                                                      <input  type="text"  [ngModelOptions]="{standalone: true}" autocomplete="off"
                                                      [(ngModel)]="workroom.quantity" [disabled]="true" class="form-control"  min="1" max="7" />

                                                   </div>
                                                   </div>
                                                   <div class="col-md-2 text-right pl-0 d-flex align-items-center manufacttext ">
                                                      <div class=""><input type="text" disabled class="form-control text-center input-width" value="{{workroom['Hour/mins']}}" matTooltipPosition="below" matTooltip="{{workroom['Hour/mins']}}"></div>
                                                   </div>
                                                   <div class="col-md-2 manufacttext pl-0 d-flex align-items-center">
                                                      <input type="text" autocomplete="off"
                                                         value="{{currencydetail?.bacs ? '': currencySymbole}} {{workroom.cost_price}} {{currencydetail?.bacs ? currencySymbole : ''}}"
                                                         matTooltipPosition="below" matTooltip="{{workroom.cost_price}}" disabled
                                                         class="form-control mr-1" />
                                                   </div>
                                                   <div class="col-md-2 manufactright d-flex align-items-center px-0 pr-2">
                                                      <input type="text" autocomplete="off"
                                                         value="{{currencydetail?.bacs ? '': currencySymbole}} {{workroom.markupprice?workroom.markupprice:'0.00'}} {{currencydetail?.bacs ? currencySymbole : ''}}"
                                                         matTooltipPosition="below"
                                                         matTooltip="{{workroom.markupprice?workroom.markupprice:'0.00'}}"
                                                         disabled class="form-control mr-1" />
                                                      <div class="rowaction">
                                                         <i class="fas fa-pencil-alt penicon pincheck p-2" style="cursor: pointer;"
                                                            (click)="editOperation(workroom,'workroom')" matTooltipPosition="below"
                                                            matTooltip="Operation Edit" style="cursor: pointer;"></i>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </form>
                                       </div>
                                       <div class="totalcalc">
                                          <span class="">{{'Total cost :' | translate}} <span class="price">{{currencydetail?.bacs ? '':
                                                currencySymbole}} {{totalOperationCost}} {{currencydetail?.bacs ? currencySymbole :
                                                ''}}</span></span>
                                          <span class="ml-4">{{'Total selling :' | translate}} <span class="price">{{currencydetail?.bacs ? '':
                                                currencySymbole}} {{totalOperationSellingCost}} {{currencydetail?.bacs ? currencySymbole :
                                                ''}}</span></span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div *ngIf="getSectionIds().length > 0">
                              <div class="col-12 px-2 materials_sec" [ngClass]="acceptanceflag ? '' : 'quoacceptance'"
                                 *ngFor="let section of getSectionIds()">
                                 <div class="mt-3 Production_width" *ngIf="section!='Materials'">
                                    <div class="customborder" id="heightchanges">
                                       <div class="production_head">
                                          <h5 class="mb-0">{{section | translate}}</h5>
                                       </div>
                                       <div class="production_content" [ngStyle]="{'pointer-events':disableFields?'none':''}" (keydown)="blockKeyboardEvents($event)">
                                          <div class="measurement_child w-100">
                                             <div class="row m-0 price_head">
                                                <div class="col-md-4"></div>
                                                <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >0">
                                                   <h6>Cost</h6>
                                                </div>
                                                <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >0">
                                                   <h6>Selling</h6>
                                                </div>
                                                <div class="col-md-4"></div>
                                                <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >1">
                                                   <h6>Cost</h6>
                                                </div>
                                                <div class="col-md-1 pl-0" *ngIf="groupedData[section].length >1">
                                                   <h6>Selling</h6>
                                                </div>
                                             </div>
                                             <form novalidate="" class="ng-untouched customform ng-pristine ng-valid"
                                                *ngIf="materialList.length != 0">
                                                <ng-container *ngFor="let quote of groupedData[section];let i=index;">
                                                   <div class="col d-flex manufactrow px-0"
                                                      *ngIf="quote.fs_displayonproduction == 1 && quote.showhideflag == 1">
                                                      <div class="addcustomdiv d-flex" *ngIf=" quote.fs_displayonproduction == 1">
                                                         <div *ngIf="quote.fs_displayonproduction == 1" class="col-md-4 pl-2 text-left manufacttext">
                                                            <span class="flexbasisv" matTooltipPosition="below" matTooltip="{{quote.fs_variablename}}">{{quote.fs_variablename | translate}}</span></div>
                                                         <div *ngIf="quote.fs_displayonproduction == 1"
                                                            class="col-md-2 d-flex pl-0 align-items-center manufactpriceinput ">
                                                            <div class="textfield">
                                                               <input
                                                                  *ngIf=" (quote.pricevalue != '' || quote.fs_overidevalue != 0)  && (costpricecomesfrom == '1' || quote.fs_bom == '1') && quote.priceComesFormFlag ==undefined && costpricecomesfrom != '3'"
                                                                  type="text" (change)="productionoverride($event,quote.fs_id)"
                                                                  [ngModelOptions]="{standalone: true}" autocomplete="off"
                                                                  [(ngModel)]="quote.pricevalue"
                                                                  [disabled]="quote.fs_overidevalue == 0 ? true : false" class="form-control" min="1"
                                                                  max="7" matTooltipPosition="below" matTooltip="{{quote.pricevalue}}" />
                                                               <input
                                                                  *ngIf="quote.quantity != undefined && (costpricecomesfrom == '2' || costpricecomesfrom == '3') && quote.priceComesFormFlag ==undefined && costpricecomesfrom != '3'"
                                                                  type="text" (change)="productionoverride($event,quote.fs_id)"
                                                                  [ngModelOptions]="{standalone: true}" autocomplete="off"
                                                                  [(ngModel)]="quote.quantity" [disabled]="quote.fs_overidevalue == 0 ? true : false"
                                                                  class="form-control" min="1" max="7" matTooltipPosition="below"
                                                                  matTooltip="{{quote.quantity}}" />
                                                               <input *ngIf="costpricecomesfrom == '3' || quote.priceComesFormFlag" type="text"
                                                                  (change)="productionoverride($event,quote.fs_id)"
                                                                  [ngModelOptions]="{standalone: true}" autocomplete="off"
                                                                  [(ngModel)]="quote.quantity != undefined ? quote.quantity : quote.pricevalue"
                                                                  [disabled]="quote.fs_overidevalue == 0 || quote.battenstype == 0 ? true : false"
                                                                  class="form-control" min="1" max="7" matTooltipPosition="below"
                                                                  [matTooltip]="quote.quantity != undefined ? quote.quantity : quote.pricevalue" />
                                                            </div>
                                                         </div>
                                                         <div *ngIf="quote.fs_displayonproduction == 1"
                                                            class="col-md-2 text-right pl-0 d-flex align-items-center manufacttext ">
                                                            <div class=""><input type="text" disabled class="form-control text-center input-width"
                                                                  matTooltipPosition="below" matTooltip="{{quote.unittype}}"
                                                                  value="{{quote.unittype}}"></div>
                                                         </div>
                                                         <div *ngIf="quote.fs_displayonproduction == 1"
                                                            class="col-md-2 manufacttext pl-0 d-flex align-items-center">
                                                            <input type="text" autocomplete="off" matTooltipPosition="below"
                                                               matTooltip="{{quote.costPrice}}" [value]="currencysetPosition(quote.costPrice)"
                                                               disabled class="form-control mr-1" />
                                                         </div>
                                                         <div *ngIf="quote.fs_displayonproduction == 1"
                                                            class="col-md-2 manufactright d-flex align-items-center px-0 pr-2">
                                                            <input type="text" autocomplete="off" matTooltipPosition="below"
                                                               matTooltip="{{quote.sellingprice}}" [value]="currencysetPosition(quote.sellingprice)"
                                                               disabled class="form-control mr-1" />
                                                            <div class="rowaction">
                                                               <i class="fas fa-pencil-alt penicon pincheck p-2" style="cursor: pointer;"
                                                                  *ngIf="((quote.fs_formula != '' && quote.fs_formula != '0' && quote.fs_formula != 'noFormula') && (costpricecomesfrom == '1' || netpricecomesfrom == '1')) || ((costpricecomesfrom == '2' || netpricecomesfrom == '1') && quote.fs_bom == 1) && quote.priceComesFormFlag ==undefined"
                                                                  (click)="editFormula(quote,'quote')" matTooltipPosition="below"
                                                                  matTooltip="Formula Edit" style="cursor: pointer;"></i>
                                                            </div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </ng-container>
                                             </form>
                                          </div>
                                          <div class="totalcalc">
                                             <span class="">{{'Total cost :' | translate}} <span class="price">{{currencydetail?.bacs ? '':
                                                   currencySymbole}} {{sectionTotalCost[section]}} {{currencydetail?.bacs ? currencySymbole :
                                                   ''}}</span></span>
                                             <span class="ml-4">{{'Total selling :' | translate}} <span class="price">{{currencydetail?.bacs ? '':
                                                   currencySymbole}} {{sectionTotalSelling[section]}} {{currencydetail?.bacs ? currencySymbole :
                                                   ''}}</span></span>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <!-- LA-I1921 case code ends here -->
                     </mat-tab>
                  </mat-tab-group>

                  <div>
            <p class="validationtext" *ngIf="validationflag && !receipedisabledflag">{{validationerrmsg | translate}}</p>
            <p class="validationtext" *ngIf="maxwidtherr  && !receipedisabledflag">{{maxwidtherr | translate}}</p>
                  </div>
               <div *ngIf="widthdropflag  && !receipedisabledflag" class="orderfooteralert">
                  <p class="validationtext">
                     <i class="fas fa-exclamation-triangle"></i>
                     {{widthdropmsg | translate}}</p>
               </div>
               <div *ngIf="widthdroppriceflag  && !receipedisabledflag" class="orderfooteralert">
                  <p class="validationtext">
                     <i class="fas fa-exclamation-triangle"></i>
                     {{widthdroppricemsg | translate}}</p>
               </div>
               <p *ngIf="disableFields && !onlineflag" class="invoice-term"> <span class="mr-1"> <i class="fas fa-lock" ></i></span> This job has been invoiced, to edit it please delete the invoice first.</p>
               </div>
               <!-- <div class="pl-0 middlecol rollerinfo pr-4 mt-5">
               <div class="leftslider">
               <h5>Show Less Quote Formulas</h5>
               </div>
               <div class="rightform d-flex">
                  <div class="quotesformulas">
                  <span>Quote Formulas</span>
                  </div>
                  <div class="px-3 formulaform">
                     <div class="row">
                        <div class="col-6">Extra fabric to order:</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Fabric Mark Up %</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Override Fabric Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Widths Required</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Fabric cut cm</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Pattern Repeat Adjust Drop cm</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                     <div class="row">
                        <div class="col-6">Lining Price</div>
                        <div class="col-6"><input type="text"  autocomplete="off" class="form-control"/></div>
                     </div>
                  </div>

               </div>
               </div> -->
               <div class="col rightsecmargin  manprice" [ngClass]="acceptanceflag ? '' : 'quoacceptance'">
                  <!-- Product slider right side start by Hari -->
                  <div class="product_carousel">
                     <div class="carousel_product py-1" *ngIf="productlist.length">
                        <div class="l_r_scroll">
                           <button (click)="scrollLeft()" [disabled]="currentIndex === 0"><i class="fa fa-angle-left scroll_btn" aria-hidden="true"></i></button>
                        </div>
                        <div  id="scrollcarousel" class="carousel_item">
                           <div class="item" *ngFor="let list of productlist">
                              <span class="para" [matTooltip]="list.pm_manualname">{{list.pm_manualname}}</span>
                              <div class="item_icons">
                                 <ng-container *ngIf="list.pm_attachmentfile">
                                    <span class="line_gap"></span>
                                    <a [href]="envImageUrl+list.pm_attachmentfile" target="_blank" [matTooltip]="list.filename">
                                       <img *ngIf="list.filetype == 'pdf'" src="assets/pdf_1.png">
                                       <img *ngIf="list.filetype == 'docx'" src="assets/doc.png">
                                       <img *ngIf="['jpeg','jpg'].includes(list.filetype )" src="assets/jpg.png">
                                       <img *ngIf="['xlsx','xls'].includes(list.filetype)" src="assets/xlsx_1.png">
                                    </a>
                                 </ng-container>
                                 <ng-container *ngIf="list.pm_manualurl">
                                    <span class="line_gap"></span>
                                    <a [href]="list.pm_manualurl" target="_blank" [matTooltip]="list.pm_manualurl">
                                       <i class="fa fa-external-link" aria-hidden="true"></i>
                                    </a>
                                 </ng-container>
                              </div>
                           </div>
                        </div>
                        <div class="l_r_scroll">
                           <button (click)="scrollRight()" [disabled]="currentIndex === productlist.length-1"><i class="fa fa-angle-right scroll_btn" aria-hidden="true"></i></button>
                        </div>
                     </div>
                  </div>
                  <!-- Product slider right side end by Hari -->
                  <div class="forhighres">
                     <!-- This class using in ts file "bgImgDiv" -->
                     <div  *ngIf="!receipedisabledflag"  class="tab-pane active border coming bgImgDiv" id="home" role="tabpanel" aria-labelledby="home-tab" (click)="openGalleryImageModel('body');fullpreview=true;">
                        <div class="save_prod_image" id="bgImgUrl">
                           <div *ngIf="!showImg">
                           <div *ngIf="colorimageurl" id="pro_color_image" [ngStyle]="{'background-image': 'url(' + colorimageurl + ')'}" [ngClass]="category == '5' ? 'shutterclass' : ''">
                           </div>
                           <div class="prdimg pro_bg-image" id="prodbackurl" [ngStyle]="{'background-image': 'url(' + backgroundimageurl + ')'}" >
                           </div>
                        </div>
                           <div *ngIf="showImg && tempImage?.flagcolor != '1'">
                              <div class="prdimg pro_bg-image" id="prodbackurl" [ngStyle]="{'background-image': 'url(' + backgroundimageurl + ')'}" ></div>
                              <div class="prdimg pro_bg-image" id="prodbackurl" [ngStyle]="{'background-image': 'url(' + envImageUrl + tempImage.optionimage + ')'}" ></div>
                           </div>
                        </div>
                           <!-- <div class="framefix" *ngIf="frameimageurl">
                              <img src="{{ frameimageurl }}">
                           </div> -->
                     </div>
                        <div class="container w-100">
                           <div class="carousel-container position-relative row">
                           <!-- <div id="myCarousel" class="carousel slide h-100 w-100" data-interval="false">
                           <div *ngIf="imageForProColOpt?.optionsimages?.length" class="carousel-inner">
                              <div *ngFor="let optimg of imageForProColOpt.optionsimages; index as i" class="carousel-item" attr.data-slide-number="{{i}}" id="carousel-preview-{{i}}">
                                 <img src="{{ envImageUrl + optimg.optionimage }}" class="d-block" alt="..." attr.data-remote="{{ envImageUrl + optimg.optionimage }}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                              </div>
                           </div>
                           </div> -->
                           <div id="carousel-thumbs" *ngIf="imageForProColOpt?.splitoptionsimages[0]?.length" class="carousel slide" data-interval="false" (click)="openGalleryImageModel('carousel');fullpreview=false;">
                           <div class="carousel-inner">
                              <div *ngFor="let sptoptimg of imageForProColOpt.splitoptionsimages; index as i" class="carousel-item" [ngClass]="{'active': i === 0}">
                                 <div *ngIf="sptoptimg?.length" class="row mx-0">
                                    <ng-container *ngFor="let soi of sptoptimg; index as j">
                                       <div  id="carousel-selector-{{soi.slideindex}}" class="thumb col-4 col-sm-2 px-1 py-2 selected" data-target="#myCarousel" attr.data-slide-to="{{soi.slideindex}}" >
                                          <img  src="{{ envImageUrl + soi.optionimage }}" class="img-fluid" alt="..." (mouseenter)="toggleActiveToCarouselPreview(soi,'over')" (mouseleave)="toggleActiveToCarouselPreview(soi,'leave')">
                                       </div>
                                    </ng-container>
                                 </div>
                              </div>
                           </div>
                           <a class="carousel-control-prev" href="#carousel-thumbs" role="button" data-slide="prev" (click)="carouselArrow($event,'prev')">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="sr-only">{{'Previous' | translate}}</span>
                           </a>
                           <a class="carousel-control-next" href="#carousel-thumbs" role="button" data-slide="next" (click)="carouselArrow($event,'next')">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="sr-only">{{'Next' | translate}}</span>
                           </a>
                           </div>

                           </div>
                        </div>

                     <div class="forhighupdte">
                        <div class="" [ngClass]="receipedisabledflag ? '' : 'manage'">
                           <div class="fabric">
                              <div class="row">

                              </div>
                              <div class="accordion" id="accordionExample">
                                 <div class="" *ngIf="!onlineflag && !receipedisabledflag">
                                    <div class="" id="headingOne" class="collapsehead">
                                       <h2 class="mb-0" data-toggle="collapse" data-target="#collapseOne"
                                          aria-expanded="true" aria-controls="collapseOne">
                                          <i class="fas fa-caret-right"></i>
                                          <span class="ml-2 right_head"><span>{{'Dates' | translate}}</span></span>
                                       </h2>
                                    </div>

                                    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                       >
                                       <div class="ml-4">
                                          <form novalidate="" class="ng-untouched ng-pristine ng-valid mt-2">
                                             <div class="row columncutoms rowoverwrite">
                                                <div class="col-md-12 col-lg-6 custompt"><span>{{'Created Date' | translate}}</span></div>
                                                <div class="col-md-12 col-lg-6 d-flex justify-content-end">
                                                <!-- <input type="text"  autocomplete="off" value={{orderpricecalculation.createdate}} id="createdate" class="form-control" disabled /> -->
                                                <igx-date-picker [value]="orderpricecalculation.createdate" tabindex="-1" [inputFormat]="formatdate" [displayFormat]="Displayformat" id="createdate" class="form-control disbledcolor" ></igx-date-picker>
                                                </div>
                                                <div class="col-md-12 col-lg-6 pr-md-0 custompt"><span>{{'Product Due Date' | translate}}</span></div>
                                                <div class="col-md-12  col-lg-6 d-flex justify-content-end">
                                                   <igx-date-picker [value]="orderpricecalculation.productiondate" tabindex="-1"
                                                   (click)="onFocus($event)" [minValue]="orderpricecalculation.createdate"
                                                   (valueChange)="valueChange($event)"
                                                   #datePicker [inputFormat]="formatdate" id="proddate" [displayFormat]="Displayformat"
                                                   class="form-control" ></igx-date-picker>
                                             </div>
                                             <div class="col-md-12"  *ngIf="datevalidation"><h6 class="validationText">{{datevalidation}}</h6></div>
                                          </div>
                                          </form>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="">
                                    <div class="" id="headingTwo" class="collapsehead pb-0">
                                       <h2 class="mb-0 d-flex justify-content-between align-items-center">
                                          <div data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                             <i class="fas fa-caret-right"></i>
                                             <span class="ml-2 right_head"><span>{{onlineflag ? 'Trade Price' : 'Price Details' | translate}}</span></span>
                                          </div>
                                          <button [ngStyle]="enabledisableflag || rulesBaseDisableSave ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }" *ngIf="priceCalculation && !globaleditPopup" type="button" (click)="runRule()" class="Newsavebtn" tabindex="-1">Calculate price</button>
                                       </h2>
                                    </div>
                                    <div id="collapseTwo" class="collapse show p-2" aria-labelledby="headingTwo" [ngStyle]="{'pointer-events':disableFields?'none':''}" (keydown)="blockKeyboardEvents($event)">
                                       <div class="ml-4 pricedetails">
                                          <form novalidate="" class="ng-untouched ng-pristine ng-valid mt-2">
                                             <div class="row columncutoms inputcol rowoverwrite">
                                                <ng-container *ngIf="!onlineflag">
                                                <ng-container *ngIf="!ispriceenable">
                                                   <div class="col-md-8 col-lg-4 pt-2 pl-0 pr-md-0">
                                                      <span>{{'Cost Price' | translate}}</span>
                                                   </div>
                                                   <div class="col-md-5 col-lg-2 ttlctprice p-0 mt-lg-1" [ngStyle]="{'opacity': disableFields ? 0.5 : 1}">
                                                      <label class="switch" [ngStyle]="enabledisableflag || rulesBaseDisableSave ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }">
                                                         <input type="checkbox" (change)="costpriceedit($event)" tabindex="-1" [checked]="orderpricecalculation.costpricetoggle" >
                                                         <div class="slider round" >
                                                            <span class="on" title="{{'Override' | translate}}">{{'Override' | translate}}</span>
                                                            <span class="off" title="{{'Override' | translate}}">{{'Override' | translate}}</span>
                                                         </div>
                                                   </label>
                                                   </div>
                                                   <div class="col-md-12 col-lg-5 customcol" [ngStyle]="enabledisableflag || rulesBaseDisableSave || isInvalidDiscount ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }">
                                                      <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                      <input type="text"  autocomplete="off" (paste)="Pastedata($event)" (keypress)="validationdata($event)" (keyup)="costpricecalc($event)" [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.totalcost && orderpricecalculation.totalcost > 0" value='{{orderpricecalculation.totalcost}}' class="form-control tabswap1" tabindex="-1" [disabled]="costpriceflag && !disableFields ? false : true" />
                                                      <input type="text"  autocomplete="off" (paste)="Pastedata($event)" (keypress)="tabvalidationdata($event)" (keyup)="costpricecalc($event)" [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.totalcost && orderpricecalculation.totalcost > 0" value='{{orderpricecalculation.totalcost}}' class="form-control tabswap2"
                                                      [disabled]="costpriceflag && !disableFields ? false : true"  tabindex="-1"/>
                                                      <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                </ng-container>
                                                <ng-container *ngIf="!ispriceenable">
                                                <div class="col-md-12 col-lg-7 pl-0 pr-2">
                                                      <!-- <option value="">Override Price</option> -->
                                                      <!-- <option *ngFor="let price of orderpricearray;let i=index;" value="{{price.primaryid}}">{{price.displayname | translate}}</option> -->
                                                      <!-- <select (change)="changepricecalc($event)" [ngModelOptions]="{standalone: true}" tabindex="-1" [(ngModel)]="orderpricecalculation.overrideprice" id="pricecalc"  name="pricecalc" class="form-control border-0 mb-0" >
                                                         <ng-container *ngFor="let orderformPricetypelists of orderpricearray;let i = index">
                                                            <option
                                                               *ngIf="orderformPricetypelists.name!='Discount' && orderformPricetypelists.name!='Round Gross Price'"
                                                               value="{{orderformPricetypelists.primaryid}}">
                                                               {{orderformPricetypelists.displayname| translate}}
                                                            </option>
                                                      </ng-container>
                                                      <ng-container *ngFor="let orderformPricetypelists of orderpricearray;let i = index">
                                                            <optgroup *ngIf="orderformPricetypelists.name=='Discount' || orderformPricetypelists.name=='Round Gross Price'"  [label]="orderformPricetypelists.name">
                                                               <option *ngFor="let subData of orderformPricetypelists.sub_data" value="{{subData.primaryid}}">{{subData.displayname}}</option>
                                                            </optgroup>
                                                      </ng-container>
                                                      </select> -->
                                                      <div class="dropdown discount_drop bootstrapdrp w-auto dropdown_active"
                                                      (click)="overridePriceOptionHover($event)" [ngStyle]="enabledisableflag || rulesBaseDisableSave ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }">
                                                         <button [disabled]="disableFields"
                                                            class="btn dropdown-toggle" type="button" id="dropdownMenuLink_orderform_one"
                                                            data-toggle="dropdown" [attr.aria-expanded]="isDropdown ? 'true' : 'false'"  tabindex="-1">
                                                            {{selectedNameForOverridePrice | translate}}

                                                         </button>
                                                         <div class="dropdown-menu w-100" [ngClass]="{'show': isDropdown}">
                                                            <ng-container *ngFor="let orderformPricetypelists of orderpricearray;let i = index">
                                                               <a [ngClass]="{'active': selectedId === orderformPricetypelists.id}" class="dropdown-item gross" (click)="changepricecalc(orderformPricetypelists.primaryid,orderformPricetypelists.name,orderformPricetypelists.id)">
                                                                  <p class="drop_width m-0" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{orderformPricetypelists.name | translate}}">{{orderformPricetypelists.name === "Discount" ? orderformPricetypelists.displayname : orderformPricetypelists.name | translate}}</p></a>
                                                            </ng-container>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <div class="col-md-12 col-lg-5 customcol">
                                                      <span class="currencysymbol" *ngIf="currencySymFlag && !(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                      <input type="text"  autocomplete="off" (paste)="Pastedata($event)" tabindex="-1" (keypress)="validationdata($event)" [attr.disabled]="overRideFlag || disableFields?true:null" [ngModelOptions]="{standalone: true}" value='{{orderpricecalculation.overridepricecalc}}' [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.overridepricecalc && orderpricecalculation.overridepricecalc > 0" [(ngModel)]="orderpricecalculation.overridepricecalc" (keyup)="orderpricecalc($event)" class="form-control tabswap1"/>
                                                      <input type="number"  autocomplete="off" (paste)="Pastedata($event)" tabindex="-1" (keypress)="tabvalidationdata($event)" [attr.disabled]="overRideFlag || disableFields?true:null" [ngModelOptions]="{standalone: true}" value={{orderpricecalculation.overridepricecalc}} [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.overridepricecalc && orderpricecalculation.overridepricecalc > 0" [(ngModel)]="orderpricecalculation.overridepricecalc" (keyup)="orderpricecalc($event)" class="form-control tabswap2"[ngClass]="{'is-invalid': isInvalidDiscount}"/>
                                                      <span class="currencysymbol" *ngIf="(currencydetail?.bacs && currencySymFlag)">{{currencySymbole}} </span>
                                                   </div>
                                                   <div class="col-12 p-0">
                                                      <div class="customcol">
                                                         <span *ngIf="isInvalidDiscount" class="text-danger validationText">
                                                            {{maxDiscountErrorMsg | translate}}
                                                         </span>
                                                      </div>
                                                   </div>
                                                </ng-container>
                                             </ng-container>
                                                <!-- <div class="col-md-5"><span>Discount</span></div>
                                                <div class="col-md-6">
                                                   <input type="number" class="form-control" />
                                                </div> -->
                                                <ng-container *ngIf="!ispriceenable || onlineflag">
                                                   <div class="col-md-12 col-lg-7 pl-0 pr-0 custompt"><span>{{'Net Price' | translate}}</span></div>
                                                   <div class="col-md-12 col-lg-5 customcol">
                                                      <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                      <input type="text"  autocomplete="off" tabindex="-1" value='{{oldorderpricecalculation.netprice}}' class="form-control" disabled />
                                                      <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                </ng-container>
                                                <ng-container *ngIf="!ispriceenable || onlineflag">
                                                   <div class="col-md-12 col-lg-7 pl-0 pr-0 d-flex align-items-center" *ngIf="showtaxjobitem"><span class="mr-1">{{defaultsalestaxlabel | translate}}</span>
                                                      <div>
                                                         <label class="switch switchvat" [ngClass]="onlineflag ? 'onlinedisabledcls' : ''" [ngStyle]="enabledisableflag || saveorderflag || rulesBaseDisableSave ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }">
                                                            <input type="checkbox" [(ngModel)]="vatcalctoggle" [ngModelOptions]="{standalone: true}" (change)="vatchange($event)" [checked]="vatcalctoggle" tabindex="-1">
                                                            <div class="slider round" [ngStyle]="{'opacity': disableFields ? 0.5 : 1}">
                                                               <span class="on" title="{{'Override' | translate}}">{{'On' | translate}}</span>
                                                               <span class="off" title="{{'Override' | translate}}">{{'Off' | translate}}</span>
                                                            </div>
                                                      </label>
                                                      </div>
                                                      <select [disabled]="(vatcalctoggle && !onlineflag) && !disableFields? false : true" [(ngModel)]="vatvalue" (change)="vatvaluechange()" [ngModelOptions]="{standalone: true}" id="vatpercent" name="vatpercent" *ngIf="ordervattype == 1" class="w-50 form-control ml-2" [ngStyle]="enabledisableflag || saveorderflag || rulesBaseDisableSave ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }" tabindex="-1">
                                                         <option *ngFor="let vat of vatarray;trackBy:tracker;let i=index" value="{{vat.value}}">{{vat.value | translate}}%</option>
                                                      </select>
                                                      <input type="text" readonly ="w-50 form-control ml-2" id="inputvat" [ngClass]="vatcalctoggle ? 'vatenable':  'vatdisable'" *ngIf="ordervattype != 1" autocomplete="off" value="{{vatvalue}}%" class="form-control"/>
                                                </div>
                                                   <div class="col-md-12 col-lg-5 customcol" *ngIf="showtaxjobitem">
                                                      <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                      <input type="text"  autocomplete="off" value='{{oldorderpricecalculation.vat}}' class="form-control" disabled />
                                                      <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                </ng-container>
                                                <ng-container *ngIf="!ispriceenable || onlineflag">
                                                   <div class="col-md-12 col-lg-7 pl-0 pr-0 custompt">
                                                      <span>{{'Total Gross Price' | translate}}</span>
                                                   </div>
                                                   <div class="col-md-12 col-lg-5 customcol">
                                                      <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                      <input type="text"  autocomplete="off"  value='{{oldorderpricecalculation.totalgross}}' class="form-control" disabled />
                                                      <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                </ng-container>
                                                <ng-container *ngIf="ispriceenable && (!onlineflag)">
                                                   <ng-container *ngFor="let item of pricefields?.allpricefield;trackBy: tracker">
                                                      <ng-container *ngIf="item?.hiddenfield != '1'">
                                                         <ng-container *ngIf="item.id== '9'"><!--override selection id-->
                                                            <div class="col-md-12 col-lg-7 pl-0 pr-2">
                                                               <div class="dropdown discount_drop bootstrapdrp w-auto"
                                                               (mouseenter)="overridePriceOptionHover($event)" (mouseleave)="overridepriceMouseLeave()">
                                                                  <button
                                                                     class="btn dropdown-toggle" type="button" id="dropdownMenuLink_orderform_one"
                                                                     data-toggle="dropdown" aria-expanded="false">
                                                                     {{selectedNameForOverridePrice | translate}}

                                                                  </button>
                                                                  <div class="dropdown-menu w-100">
                                                                     <ng-container *ngFor="let orderformPricetypelists of orderpricearray;let i = index">
                                                                        <ng-container *ngIf="i<2">
                                                                        <a class="dropdown-item gross">
                                                                           <p class="drop_width m-0" (click)="changepricecalc(orderformPricetypelists.primaryid,orderformPricetypelists.name)" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{orderformPricetypelists.name | translate}}">{{orderformPricetypelists.name | translate}}</p>
                                                                           <ul class="subdropdown" *ngIf="orderformPricetypelists?.sub_data">
                                                                              <ng-container *ngFor="let subData of orderformPricetypelists.sub_data">
                                                                                    <li class="py-2 px-4" *ngIf="subData?.displayname!=''" (click)="changepricecalc(subData.primaryid,subData.name)" [ngStyle]="orderpricecalculation.overrideprice==subData.primaryid ? {'background-color':'#e9ecef'}:''">{{subData.displayname}}</li>
                                                                              </ng-container>
                                                                           </ul>
                                                                        </a>
                                                                        </ng-container>
                                                                     </ng-container>
                                                                  </div>
                                                               </div>
                                                            </div>
                                                            <div class="col-md-12 col-lg-5 customcol">
                                                               <span class="currencysymbol">{{currencySymbole}} </span>
                                                               <input type="text"  autocomplete="off" (paste)="Pastedata($event)" tabindex="-1" (keypress)="validationdata($event)" [attr.disabled]="overRideFlag?true:null" [ngModelOptions]="{standalone: true}" value='{{orderpricecalculation.overridepricecalc}}' [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.overridepricecalc && orderpricecalculation.overridepricecalc > 0" [(ngModel)]="orderpricecalculation.overridepricecalc" (keyup)="orderpricecalc($event)" class="form-control tabswap1"/>
                                                               <input type="number"  autocomplete="off" (paste)="Pastedata($event)" (keypress)="tabvalidationdata($event)" [attr.disabled]="overRideFlag?true:null" [ngModelOptions]="{standalone: true}" value={{orderpricecalculation.overridepricecalc}} [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.overridepricecalc && orderpricecalculation.overridepricecalc > 0" [(ngModel)]="orderpricecalculation.overridepricecalc" (keyup)="orderpricecalc($event)" class="form-control tabswap2"/>
                                                            </div>
                                                         </ng-container>
                                                         <ng-container *ngIf="item.id == '1'"><!--Cost price id-->
                                                            <div class="col-md-8 col-lg-4 pt-2 pl-0 pr-md-0">
                                                               <span>{{item.name | translate}}</span>
                                                            </div>
                                                            <div class="col-md-5 col-lg-2 ttlctprice p-0 mt-lg-1" [ngStyle]="{'opacity': disableFields ? 0.5 : 1}">
                                                               <label class="switch">
                                                                  <input type="checkbox" (change)="costpriceedit($event)" [checked]="orderpricecalculation.costpricetoggle" >
                                                                  <div class="slider round">
                                                                     <span class="on" title="{{'Override' | translate}}">{{'Override' | translate}}</span>
                                                                     <span class="off" title="{{'Override' | translate}}">{{'Override' | translate}}</span>
                                                                  </div>
                                                            </label>
                                                            </div>
                                                            <div class="col-md-12 col-lg-5 customcol">
                                                               <span class="currencysymbol">{{currencySymbole}} </span>
                                                               <input type="text"  autocomplete="off" (paste)="Pastedata($event)" (keypress)="validationdata($event)" (keyup)="costpricecalc($event)" [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.totalcost && orderpricecalculation.totalcost > 0" value='{{orderpricecalculation.totalcost}}' class="form-control tabswap1"
                                                               [disabled]="costpriceflag ? false : true" />
                                                               <input type="text"  autocomplete="off" (paste)="Pastedata($event)" (keypress)="tabvalidationdata($event)" (keyup)="costpricecalc($event)" [class.bg_pinkColor]="globaleditPopup && orderpricecalculation.totalcost && orderpricecalculation.totalcost > 0" value='{{orderpricecalculation.totalcost}}' class="form-control tabswap2"
                                                               [disabled]="costpriceflag ? false : true" />
                                                            </div>
                                                         </ng-container>
                                                         <ng-container *ngIf="item.id == '3'"><!--GST/VAT id-->
                                                            <div class="col-md-12 col-lg-7 pl-0 pr-0 d-flex align-items-center" *ngIf="showtaxjobitem"><span class="mr-1">{{defaultsalestaxlabel | translate}}</span>
                                                               <div>
                                                                  <label class="switch switchvat" [ngClass]="onlineflag ? 'onlinedisabledcls' : ''" >
                                                                     <input type="checkbox" [(ngModel)]="vatcalctoggle" [ngModelOptions]="{standalone: true}" (change)="vatchange($event)" [checked]="vatcalctoggle">
                                                                     <div class="slider round" [ngStyle]="{'opacity': disableFields ? 0.5 : 1}">
                                                                        <span class="on" title="{{'Override' | translate}}">{{'On' | translate}}</span>
                                                                        <span class="off" title="{{'Override' | translate}}">{{'Off' | translate}}</span>
                                                                     </div>
                                                               </label>
                                                               </div>
                                                               <select [disabled]="(vatcalctoggle && !onlineflag)? false : true" [(ngModel)]="vatvalue" (change)="vatvaluechange()" [ngModelOptions]="{standalone: true}" id="vatpercent" name="vatpercent" *ngIf="ordervattype == 1" class="w-50 form-control ml-2">
                                                                  <option *ngFor="let vat of vatarray;trackBy:tracker;let i=index" value="{{vat.value}}">{{vat.value | translate}}%</option>
                                                               </select>
                                                               <input type="text" readonly ="w-50 form-control ml-2" id="inputvat" [ngClass]="vatcalctoggle ? 'vatenable':  'vatdisable'" *ngIf="ordervattype != 1" autocomplete="off" value="{{vatvalue}}%" class="form-control"/>
                                                         </div>
                                                            <div class="col-md-12 col-lg-5 customcol" *ngIf="showtaxjobitem">
                                                               <span class="currencysymbol">{{currencySymbole}} </span>
                                                               <input type="text"  autocomplete="off" value='{{oldorderpricecalculation.vat}}' class="form-control" disabled />
                                                            </div>
                                                         </ng-container>
                                                         <ng-container *ngIf="item.id != '9' && item.id != '1' && item.id != '3'">
                                                         <div class="col-md-12 col-lg-7 pl-0 pr-0 pr-2 d-flex align-items-center">
                                                               <span class="mr-1">{{item.name | translate}}</span>
                                                      </div>
                                                         <div class="col-md-12 col-lg-5 customcol">
                                                            <span class="currencysymbol">{{currencySymbole}} </span>
                                                            <input type="text"  autocomplete="off" [value]='item.value' class="form-control" disabled />
                                                         </div>
                                                      </ng-container>
                                                      </ng-container>
                                                   </ng-container>
                                                   <!-- <ng-container *ngFor="let item of pricefields?.custompricefield">
                                                      <div class="col-md-12 col-lg-7 pl-0 pr-0 custompt"><span>{{item.name | translate}}</span></div>
                                                      <div class="col-md-12 col-lg-5 customcol">
                                                         <span class="currencysymbol">{{currencySymbole}} </span>
                                                         <input type="text"  autocomplete="off" [value]='item.value' class="form-control" disabled />
                                                      </div>
                                                   </ng-container> -->
                                                </ng-container>
                                             </div>
                                          </form>
                                       </div>
                                    </div>
                                 </div>
                                 <!--ONLINE ORDER PORATAL JOB FORM SECTION START-->
                                 <div class="" *ngIf="onlineflag" [ngClass]="onlineflag ? 'custominputpresidence': '' ">
                                    <div class="" id="headingTwo" class="collapsehead">
                                       <h2 class="mb-0" data-toggle="collapse" data-target="#collapseThree"
                                          aria-expanded="false" aria-controls="collapseTwo">
                                          <i class="fas fa-caret-right"></i>
                                          <span class="ml-2 right_head"><span>{{'End Customer Price' | translate}}</span></span>
                                       </h2>
                                    </div>
                                    <div id="collapseThree" class="collapse show" aria-labelledby="headingTwo"
                                       >
                                       <div class="ml-4 pricedetails">
                                          <form novalidate="" class="ng-untouched ng-pristine ng-valid mt-2">
                                             <div class="row columncutoms inputcol rowoverwrite">
                                                <div class="col-md-12 col-lg-7 d-flex align-items-center">
                                                   <span>{{ defaultsalestaxlabel | translate}}</span>
                                             </div>
                                                <div class="col-md-12 col-lg-5 customcol">
                                                   <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                   <input type="text"  autocomplete="off"  tabindex="-1" [ngModelOptions]="{standalone: true}" [(ngModel)]="endcustomerorderpricecalculation.vat"  name="onlinevat" class="form-control tabswap1" (paste)="Pastedata($event)" (keypress)="validationdata($event)" (keyup)="onlineportalendpricecalSub.next()" [disabled]="onllineaftersubmitordereditflag  ? 'false' : 'true'"/>
                                                   <input type="number"  autocomplete="off"  tabindex="-1" [ngModelOptions]="{standalone: true}" [(ngModel)]="endcustomerorderpricecalculation.vat"  name="onlinevat" class="form-control tabswap2" (paste)="Pastedata($event)" (keypress)="tabvalidationdata($event)" (keyup)="onlineportalendpricecalSub.next()" [disabled]="onllineaftersubmitordereditflag  ? 'false' : 'true'"/>
                                                   <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                <div class="col-md-12 col-lg-7 pl-3 pr-2">
                                                   <select (change)="onlineportalchangepricecalc($event);onlineportalorderpricecalc()" tabindex="-1" [ngModelOptions]="{standalone: true}" [(ngModel)]="endcustomerorderpricecalculation.overrideprice" id="pricecalc"  name="pricecalc" class="form-control border-0 mb-0" [disabled]="onllineaftersubmitordereditflag  ? 'false' : 'true'">
                                                      <option *ngFor="let price of onlineOverrideTypeARRAY;let i=index;" value="{{price.primaryid}}">{{price.displayname | translate}}</option>
                                                   </select>
                                                   <!-- <div class="dropdown discount_drop bootstrapdrp w-auto" [ngStyle]="onllineaftersubmitordereditflag  ? '' : { opacity: '0.6', 'pointer-events ': 'none' }"
                                                   (mouseenter)="overridePriceOptionHover($event)" (mouseleave)="overridepriceMouseLeave()" >

                                                      <button
                                                         class="btn dropdown-toggle" type="button" id="dropdownMenuLink_orderform_one"
                                                         data-toggle="dropdown" aria-expanded="false">
                                                         {{selectedNameForOverridePrice | translate}}
                                                         <img src="assets/dropdown-arrow.png" alt="" width="12">
                                                      </button>
                                                      <div class="dropdown-menu">
                                                         <a class="dropdown-item gross"  *ngFor="let orderformPricetypelists of orderpricearray;let i = index" ><p class="m-0" (click)="onlineportalchangepricecalc(orderformPricetypelists.primaryid,orderformPricetypelists.name)">{{orderformPricetypelists.name | translate}}</p>
                                                               <ul class="subdropdown"  *ngIf="orderformPricetypelists?.sub_data">
                                                                  <ng-container *ngFor="let subData of orderformPricetypelists.sub_data">
                                                                     <li class="py-2 px-4" *ngIf="subData?.displayname!=''" (click)="onlineportalchangepricecalc(subData.primaryid,subData.name)" [ngStyle]="endcustomerorderpricecalculation.overrideprice==subData.primaryid ? {'background-color':'#e9ecef'}:''">{{subData.displayname}}</li>
                                                                  </ng-container>
                                                               </ul>
                                                         </a>
                                                      </div>
                                                   </div> -->
                                                </div>
                                                <div class="col-md-12 col-lg-5 customcol">
                                                   <span class="currencysymbol" *ngIf="currencySymFlagOnline && !(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                   <input type="text"  autocomplete="off" (paste)="Pastedata($event)" tabindex="-1" (keypress)="validationdata($event)" [readonly]="endcustomerorderpricecalculation.overrideprice == 1 ? 'true' : null" [ngModelOptions]="{standalone: true}" value={{endcustomerorderpricecalculation.overridepricecalc}} [(ngModel)]="endcustomerorderpricecalculation.overridepricecalc" (keyup)="endorderpricecalc($event);onlineportalendpricecalSub.next()" class="form-control tabswap1" [disabled]="(onllineaftersubmitordereditflag && !roundflag ) ? 'false' : 'true'"/>
                                                   <input type="number"  autocomplete="off" (paste)="Pastedata($event)" (keypress)="tabvalidationdata($event)" [readonly]="endcustomerorderpricecalculation.overrideprice == 1 ? 'true' : null" [ngModelOptions]="{standalone: true}" value={{endcustomerorderpricecalculation.overridepricecalc}} [(ngModel)]="endcustomerorderpricecalculation.overridepricecalc" (keyup)="endorderpricecalc($event);onlineportalendpricecalSub.next()" class="form-control tabswap2" [disabled]="(onllineaftersubmitordereditflag && !roundflag) ? 'false' : 'true'"/>
                                                   <span class="currencysymbol" *ngIf="currencySymFlagOnline && (currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                <div class="col-md-12 col-lg-7 custompt"><span>{{'Net Price' | translate}}</span></div>
                                                <div class="col-md-12 col-lg-5 customcol">
                                                   <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                   <input type="text"  autocomplete="off" value={{endcustomerorderpricecalculation.netprice}} class="form-control" disabled />
                                                   <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                                <div class="col-md-12 col-lg-7 custompt">
                                                   <span>{{'Total Gross Price' | translate}}</span>
                                                </div>
                                                <div class="col-md-12 col-lg-5 customcol">
                                                   <span class="currencysymbol" *ngIf="!(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                   <input type="text"  autocomplete="off"  value={{endcustomerorderpricecalculation.totalgross}} class="form-control" disabled />
                                                   <span class="currencysymbol" *ngIf="(currencydetail?.bacs)">{{currencySymbole}} </span>
                                                </div>
                                             </div>
                                          </form>
                                       </div>
                                    </div>
                                 </div>
                                 <!--ONLINE ORDER PORATAL JOB FORM SECTION END-->
                              </div>
                           </div>
                        </div>
                        <div class="addnext order_save_btn"  *ngIf="!receipedisabledflag">
                           <button type="button"
                              [ngStyle]="service.isApiLoading || enabledisableflag || saveorderflag || rulesBaseDisableSave || saveflag || isInvalidDiscount || disableFields ? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }"
                              [ngClass]="[orderchangeflag ? 'Newsavebtn_Onchange' : 'Newsavebtn',  onllineaftersubmitordereditflag ? '' : 'onlinedisabledcls']"
                              (click)="saveorderform('copy')" class="greenbtn Newsavebtn" [disabled]="disableFields" >{{'Copy' | translate}}</button>
                           <button type="button"
                              [ngStyle]="service.isApiLoading || enabledisableflag || saveorderflag || rulesBaseDisableSave || saveflag || isInvalidDiscount? { opacity: '0.6', 'pointer-events ': 'none' } : { opacity: '1', 'pointer-events ': 'unset' }"
                              [ngClass]="[orderchangeflag ? 'Newsavebtn_Onchange' : 'Newsavebtn',  onllineaftersubmitordereditflag ? '' : 'onlinedisabledcls']"
                              (click)="saveorderform('close')" class="greenbtn Newsavebtn">{{'Save & Close' | translate}}</button>

                           <button type="button" data-dismiss="modal" class="jobbtn2 Newcancelbtn"
                           [ngStyle]="closeflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''" (click)="resetImageForProColOpt()">
                           {{'Cancel' | translate}}
                           </button>
                        </div>
                        </div>

                  </div>

               </div>
            </div>
         </div>

         </div>
         <div class="modal fade" id="exampleModalbk" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <span class="backclose" (click)="backclose()"></span>
            <div class="modal-dialog modal-dialog-centered modal-lg reshtchnge" role="document">
            <div class="modal-content optionmodelpopup">

               <!-- <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Options</h5>
                  <button type="button" class="close" (click)="cancelModalbk()" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                  </button>
               </div> -->
               <div class="modal-body" (keypress)="ordergridkeyvalidation($event)">
                  <!-- <app-loader *ngIf="isLoadingorderitem" class="inner_bg_looader"></app-loader> --> <!--kumar told me to comment-->
                  <div *ngIf="rowSelection == 'multiple'">

                     <ag-grid-angular style="width: 100%; height: 250px;" #agGrid class="ag-theme-alpine subMenu"
                     [rowData]="standarddata" [floatingFiltersHeight]="floatingFiltersHeight"
                     [rowHeight]="rowHeight" [headerHeight]="headerHeight" [columnDefs]="columnDefs" [tooltipShowDelay]="tooltipShowDelay" [defaultColDef]="defaultColDef" [rowSelection]="rowSelection" [modules]="modules"
                     [rowDragManaged]="true" [animateRows]="true" [frameworkComponents]="frameworkComponents"
                     [applyColumnDefOrder]="true" [suppressPaginationPanel]="true"
                     [suppressDragLeaveHidesColumns]="true" [suppressMenuHide]="true"
                     [suppressRowClickSelection]="true" [stopEditingWhenCellsLoseFocus]="true"
                     (gridReady)="onGridReady($event)" [rowMultiSelectWithClick]="true"
                     suppressCellFocus=true (filterChanged)="onFilterChanged($event)"
                     [navigateToNextCell]="navigateToNextCell.bind(this)"
                     (rowSelected)="onSelectionChanged($event)"
                     (rowClicked)='onRowClicked($event)'
                     (keydown.control.alt.arrowUp)="changeColSort('asc')"
                     (keydown.control.alt.arrowDown)="changeColSort('desc')"
                     [gridOptions]="agGridOptions"
                     [tabToNextCell]="OnTabHandler.bind(this)"
                     [context]="context"
                     [suppressRowClickSelection]="true"
                     [paginationPageSize]="paginationPageSize"
                     [detailRowAutoHeight]="true" [masterDetail]="true"
                     [paginationNumberFormatter]="paginationNumberFormatter"
                     (bodyScroll)="bodyScroll($event)"
                     [getRowHeight]="getRowHeight"
                     (sortChanged)="sortChanged($event)"
                     [overlayNoRowsTemplate]="noRowsTemplate"
                     (paginationChanged)="onPaginationChanged($event)"
                     >
                     </ag-grid-angular>

                  </div>
                  <!-- <div *ngIf="rowSelection == 'single' && submenu_pagination==false">

                     <ag-grid-angular style="width: 100%; height: 214px;" #agGrid class="ag-theme-alpine subMenu"
                     [rowData]="standarddata" [floatingFiltersHeight]="floatingFiltersHeight"
                     [rowHeight]="rowHeight" [headerHeight]="headerHeight" [columnDefs]="columnDefs" [tooltipShowDelay]="tooltipShowDelay" [defaultColDef]="defaultColDef" [rowSelection]="rowSelection" [modules]="modules"
                     [rowDragManaged]="true" [animateRows]="true" [frameworkComponents]="frameworkComponents"
                     [applyColumnDefOrder]="true" [suppressPaginationPanel]="true"
                     [suppressDragLeaveHidesColumns]="true" [suppressMenuHide]="true"
                     [stopEditingWhenCellsLoseFocus]="true"
                     (gridReady)="onGridReady($event)" [rowMultiSelectWithClick]="true"
                     suppressCellFocus=true (filterChanged)="onFilterChanged($event)"
                     [navigateToNextCell]="navigateToNextCell.bind(this)"
                     (rowSelected)="onSelectionChanged($event)"
                     (rowClicked)='onRowClicked($event)'
                     >
                     </ag-grid-angular>

                  </div>
                  <div *ngIf="rowSelection == 'single' && submenu_pagination==true"> -->
                  <div *ngIf="rowSelection == 'single'">

                     <ag-grid-angular style="width: 100%; height: 214px;" #agGrid class="ag-theme-alpine subMenu"
                     [rowData]="standarddata" [floatingFiltersHeight]="floatingFiltersHeight"
                     [rowHeight]="rowHeight" [headerHeight]="headerHeight" [columnDefs]="columnDefs"
                     [defaultColDef]="defaultColDef" [rowSelection]="rowSelection" [modules]="modules"
                     [rowDragManaged]="true" [animateRows]="true" [frameworkComponents]="frameworkComponents"
                     [applyColumnDefOrder]="true" [suppressPaginationPanel]="submenu_suppressPaginationPanel"
                     [suppressDragLeaveHidesColumns]="true" [suppressMenuHide]="true"
                     [stopEditingWhenCellsLoseFocus]="true"
                     (gridReady)="onGridReady($event)" [rowMultiSelectWithClick]="true"
                     suppressCellFocus=true (filterChanged)="onFilterChanged($event)"
                     [navigateToNextCell]="navigateToNextCell.bind(this)"
                     (rowSelected)="onSelectionChanged($event)"
                     [tabToNextCell]="OnTabHandler.bind(this)"
                     (rowClicked)='onRowClicked($event)'
                     (keydown.control.alt.arrowUp)="changeColSort('asc')"
                     (keydown.control.alt.arrowDown)="changeColSort('desc')"
                     [gridOptions]="agGridOptions"
                     [context]="context"
                     [suppressRowClickSelection]="true"
                     [paginationPageSize]="paginationPageSize"
                     [detailRowAutoHeight]="true" [masterDetail]="true"
                     [paginationNumberFormatter]="paginationNumberFormatter"
                     (bodyScroll)="bodyScroll($event)"
                     [getRowHeight]="getRowHeight"
                     (sortChanged)="sortChanged($event)"
                     [overlayNoRowsTemplate]="noRowsTemplate"
                     (paginationChanged)="onPaginationChanged($event)"
                     >
                     </ag-grid-angular>

                  </div>
                  <div class="pt-2 footercustom d-flex justify-content-between">
                     <div>
                        <button type="button" [ngStyle]="paginationflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''" id="modalsave" class="Newaddbtn mr-2"
                        (click)="addBattens()" *ngIf="battanFlag">{{'Add Custom Battens' | translate}}</button>
                        <!-- && !onlineflag -->
                     </div>

                     <div>

                           <button type="button" [ngStyle]="paginationflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''" *ngIf="rowSelection != 'single'" id="modalsave" class="btn Newsavebtn greenbtn mr-2"
                           (click)="exampleModalbk('save')">{{'Ok' | translate}}</button>

                        <button type="button" *ngIf="rowSelection != 'single'" id="modalcancel" class="btn Newcancelbtn"
                           (click)="cancelModalbk()">{{'Cancel' | translate}}</button>

                        <button type="button" *ngIf="rowSelection != 'multiple'" id="modalcancel" class="btn Newcancelbtn"
                           (click)="cancelModalbk()">{{'Cancel' | translate}}</button>
                     </div>

               </div>
               </div>

            </div>
            </div>
         </div>
         <!-- <div id="copydiv">
            <ag-grid-angular style="width: 100%; height: 214px;" #agGrid class="ag-theme-alpine" [rowData]="standarddata"
            [floatingFiltersHeight]="floatingFiltersHeight" [rowMultiSelectWithClick]="true"
            [rowHeight]="rowHeight" [headerHeight]="headerHeight" [columnDefs]="columnDefs" [defaultColDef]="defaultColDef"
            [suppressRowClickSelection]="true" [rowSelection]="rowSelection" [modules]="modules" [rowDragManaged]="true"
            [animateRows]="true" [frameworkComponents]="frameworkComponents" [applyColumnDefOrder]="true"
            [suppressPaginationPanel]="true"
            [suppressDragLeaveHidesColumns]="true" [suppressMenuHide]="true" (gridReady)="onGridReady($event)">
            </ag-grid-angular>
            <button type="button" class="btn Newcancelbtn" (click)="closeordersubgrid()">Cancel</button>
            <button type="button" class="btn Newsavebtn greenbtn" (click)="exampleModalbk()">Save</button>
         </div> -->
      </div>
      <div class="modal-footer" *ngIf="receipedisabledflag">
            <button class="Newsavebtn" [ngStyle]="enabledisableflag || isInvalidDiscount  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''"
            [ngStyle]="saveflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''" [ngClass]="orderchangeflag ? 'Newsavebtn_Onchange' : 'Newsavebtn'"
            [ngClass]="onllineaftersubmitordereditflag ? '' : 'onlinedisabledcls'" (click)="this.addeditmode = 'edit';saveorderform('close')">{{'Update Fields' | translate}}</button>
            <button class="Newcancelbtn" [ngStyle]="closeflag  ? { opacity: '0.6', 'pointer-events ': 'none' } : ''" (click)="closeModal()">{{'Cancel' | translate}}</button>
      </div>
   </div>
</ng-template>

<div id="my-modal" class="modal fade" role="dialog" data-backdrop="static">
   <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5>{{'Product Information' | translate}}</h5>
            <div>
               <span data-dismiss="modal" (click)="productFormResetFn();"><i aria-hidden="true" data-dismiss="modal"
                  class="fas fa fa-times" (click)="productFormResetFn();" (click)="globaleditPopup = false"></i></span>
            </div>
         </div>
         <div class="modal-body text-center">
            <div class="chooseproduct product" >
               <div class="row">
                  <div class="col-12">
                     <!-- <mat-tab-group headerPosition="above" [selectedIndex]="0" animationDuration="0ms">
                        <mat-tab label="Product Info">

                        </mat-tab>
                     </mat-tab-group> -->
                     <div class="">
                        <div class="row">
                           <div class="col-md-4 pt-2"><span>{{'Choose Product:' | translate}}</span></div>
                           <div class="col-md-6 pl-0">
                              <!-- <form  [formGroup]="productform">
                                 <mat-form-field class="selectfilter">
                                    <mat-select  #fff (selectionChange)="createForm($event)"
                                       formControlName="productselect" class="form-control"
                                       placeholder="Select Product"
                                       [ngClass]="{'is-invalid': (productform.get('productselect').touched) && productform.get('productselect').errors?.required}"
                                       required>
                                       <mat-option *ngIf="productarr.length > 0">
                                          <ngx-mat-select-search placeholderLabel="Search"
                                             noEntriesFoundLabel="'No Matching Product Found'"
                                             [formControl]="websiteFilterCtrl"></ngx-mat-select-search>
                                       </mat-option>
                                       <mat-option  *ngFor="let website of filteredWebsites | async "
                                          [value]="website.id">
                                          {{website.label| translate}}
                                       </mat-option>
                                       <mat-option *ngIf="productarr.length == 0">No products available</mat-option>
                                    </mat-select>
                                 </mat-form-field>
                              </form> -->
                           </div>
                        </div>
                     </div>
                  </div>

               </div>
            </div>
         </div>
         <div class="modal-footer p-1">
            <div class="addnext">
               <button type="button" data-dismiss="modal" class="jobbtn2 Newcancelbtn"
                  (click)="productFormResetFn()">
                  {{'Cancel' | translate}}
               </button>
               </div>
          </div>
      </div>
   </div>
</div>

<!-- <div class="modal fade bd-example-modal-sm" id="pricevalidation" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-sm">
     <div class="modal-content">
       <p>This price has been updated to 100</p>
       <p>Would you like to update it to the new price or keep the same?</p>
     </div>
   </div>
 </div> -->



<ng-template #priceUpdateModal>
     <div id="staticBackdrop">
      <div  class="alert-load del ng-star-inserted">
         <div  class="sucess del">
            <span  class="error">
               <i  class="fas fa-exclamation-triangle"></i> {{'Warning' | translate}} </span>
               <div >
                  <p >  {{this.checkpriceval | translate}}</p>
                  <button  type="button" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="changespricecalcpopup('update')">{{'Update' | translate}}</button>
                  <button  type="button" id="greenbtnoverride" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="changespricecalcpopup('keep')">{{'Keep' | translate}}</button>
                  <button  type="button" data-dismiss="modal" class="Newcancelbtn mt-1 mb-2" (click)="changespricecalcpopup('cancel')">{{'Cancel' | translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </ng-template>
   <ng-template #dueDateModal>
     <div id="staticBackdrop">
      <div  class="alert-load del ng-star-inserted">
         <div  class="sucess del">
            <span  class="error">
               <i  class="fas fa-exclamation-triangle"></i> {{'Warning' | translate}} </span>
               <div >
                  <p >  {{"Changing the product's production date will affect the job production date. Do you want to update?" | translate}}</p>
                  <button  type="button" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="dueDateUpdate('update')">{{'Update' | translate}}</button>
                  <button  type="button" id="greenbtnoverride" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="dueDateUpdate('keep')">{{'Keep' | translate}}</button>
                  <button  type="button" data-dismiss="modal" class="Newcancelbtn mt-1 mb-2" (click)="dueDateUpdate('cancel')">{{'Cancel' | translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </ng-template>
 <app-loader *ngIf="isLoading" class="inner_bg_looader"></app-loader>
 <div
 class="modal fade addOption"
 id="materialsoftfurnishing-modal"
 tabindex="-1"
 role="dialog"
 aria-labelledby="exampleModalLabel"
 aria-hidden="true"
 data-backdrop="static"
 >
 <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
   <div class="modal-content">
     <div class="modal-header">
       <h5>{{ 'Add Soft Furnishing Material' | translate}}</h5>
       <span type="button" (click)="closesoftFabricModal()">
         <i class="fas fa-times"></i>
       </span>
     </div>
     <form  [formGroup]="dynamicForms" (ngSubmit)="submitHandlersoft()">
       <div class="modal-body">
         <ng-container *ngFor="let form of customizedArray; let i = index">
            <div class="popupoptions">
              <div class="optionmaterils">
      </div>
                <div class="furnish m-3">
                </div>

            <div class="form-border bk_border">
                <div class="row  m-0 mb-3 cutsom_bk_info materialbkfabric">
                    <ng-container *ngFor="let fields of form.weeklist; let j = index">
                     <ng-container *ngIf="fields.name  !='Unit Type'">
                        <div [ngClass]="form.className" class="col-sm-12" *ngIf="!fields.isSalutationField">
                            <div class="row mt-2">
                                <div class="col-lg-4 col-md-12">{{ fields.name | translate }}<span
                                        *ngIf="fields?.required" class="mandatorystar"> *</span></div>
                                <div class="col-lg-8 col-md-12 formstructure appdynamicfabric">
                                    <app-dynamic-field [dynamicformflag]="'orderform'" [fields]="fields" [form]="dynamicForms" [formId]="form.id"  [fromColor]="true" [unitTypeArray]="unittypeval"
                                        (fileChange)="onSelectFile($event,fields.id,i,j)" id="fabricDynamicform" (setSupplierprice)="orderSupplierChange($event)" [priceTableArray]="priceTableArrayList" [supplierArray]="valueForSupplier" (click)="suppliereset($event,fields.name)"  ></app-dynamic-field>
                                </div>
                            </div>
                        </div>
                     </ng-container>
                    </ng-container>
                   <div>

                   </div>
                </div>
            </div>
            </div>

          </ng-container>

       </div>


       <div class="modal-footer justify-content-between">
         <!-- <button type="submit" (click)="fnchanges()" [ngClass]="dynamicForms.dirty ? 'Newsavebtn_Onchange' : 'Newsavebtn'"  class="Newsavebtn greenbtn">{{'Save'| translate}}</button> -->
         <!-- <button type="button" (click)="fnaveAsFabric()" class="Newsavebtn greenbtn">{{'Save & Link'| translate}}</button> -->
          <div>
             <input *ngIf="currentcontactid !=0" type="checkbox" (change)="onCheckboxChange($event)" id="add" name="list_name"  class="mr-2"  [checked]="customerchecked"  />
             <label class="mb-0 mr-1 add"  for="add" *ngIf="currentcontactid !=0" >{{'Add fabric only for this customer' | translate}}</label>
          </div>
          <div class="d-flex">
            <button type="submit" [ngClass]="changesflag ? 'Newsavebtn_Onchange' : 'Newsavebtn'"  class="btn Newsavebtn greenbtn mr-2">{{'Save'|translate}}</button>
            <button type="button"  class="Newcancelbtn" (click)="closesoftFabricModal()" >{{'Cancel' | translate}}</button>
          </div>

       </div>
     </form>
   </div>

 </div>
 </div>
 <app-formula-popup></app-formula-popup>
 <app-add-process-popup></app-add-process-popup>
 <!--fabric/option save confirmation popup start-->
 <div class="modal fade" id="option_fabricConfirmPopup"  data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered">
     <div  class="modal-content">
      <div  class="alert-load del ng-star-inserted">
         <div  class="sucess del">
            <!-- <span  class="error">
               <i  class="fas fa-exclamation-triangle"></i> Warning </span> -->
               <div >
                  <p > {{'The change made in the ' | translate}}{{popupService.fieldtypeid == '3' ? 'options' : 'fabrics' | translate}}{{' will apply to all the linked products.' | translate}}
                     {{'Do you want to proceed?' | translate}}
                  </p>
                  <button  type="button" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="orderpopupConfirmSave('true')">{{'Yes, Proceed' | translate}}</button>
                  <button  type="button" data-dismiss="modal" class="Newcancelbtn mt-1 mb-2" (click)="orderpopupConfirmSave('false')">{{'Discard' | translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </div>
 </div>
  <!--fabric/option save confirmation popup end-->
   <!--fabric/color save confirmation popup start-->
 <div class="modal fade" id="option_fabricColorConfirmPopup"  data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered">
     <div  class="modal-content">
      <div  class="alert-load del ng-star-inserted">
         <div  class="sucess del">
            <!-- <span  class="error">
               <i  class="fas fa-exclamation-triangle"></i> Warning </span> -->
               <div >
                  <p > {{'The change made in the colors will apply to all the linked products.' | translate}}
                     {{'Do you want to proceed?' | translate}}
                  </p>
                  <button  type="button" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="orderpopupConfirmColorSave('true')">{{'Yes, Proceed' | translate}}</button>
                  <button  type="button" data-dismiss="modal" class="Newcancelbtn mt-1 mb-2" (click)="orderpopupConfirmColorSave('false')">{{'Discard' | translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </div>
 </div>
  <!--fabric/color save confirmation popup end-->
  <!--option save confirmation popup start-->
 <div class="modal fade" id="optionConfirmPopup"  data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered">
     <div  class="modal-content">
      <div  class="alert-load del ng-star-inserted">
         <div  class="sucess del">
            <!-- <span  class="error">
               <i  class="fas fa-exclamation-triangle"></i> Warning </span> -->
               <div >
                  <p > {{'The change made in the options will apply to all the linked products.' | translate}}
                     {{'Do you want to proceed?' | translate}}
                  </p>
                  <button  type="button" class="Newcancelbtn mr-2 mt-1 mb-2" (click)="orderpopupConfirmOptionsSave('true')">{{'Yes, Proceed' | translate}}</button>
                  <button  type="button" data-dismiss="modal" class="Newcancelbtn mt-1 mb-2" (click)="orderpopupConfirmOptionsSave('false')">{{'Discard' | translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </div>
 </div>
  <!--option save confirmation popup end-->
  <!--EDIT OPTION/FABRIC FIELDS POPUP START-->
<ng-template #fabricEditModal>
      <div id="editOption_fabricPopup" class="optionmodelpopup">

        <div class="modal-header border-0 py-1">
          <!-- <h5 class="modal-title" id="exampleModalLabel"> &nbsp; </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button> -->
        </div>
        <div class="modal-body">
         <!-- <app-loader *ngIf="isLoadingorderitem" class="inner_bg_looader"></app-loader> --> <!--kumar told me to comment-->
         <ag-grid-angular id="edit_option_fabric" class="ag-theme-alpine" [context]="context"
                    [rowData]="option_fabric_rowData" [gridOptions]="option_fabric_agGridOptions" [applyColumnDefOrder]="true"
                    [columnDefs]="option_fabric_columnDefsOptions" [animateRows]="true" [defaultColDef]="option_fabric_defaultColDefOptions"
                    [suppressRowClickSelection]="true" (selectionChanged)="option_fabric_onSelectionChanged($event)" (bodyScroll)="optionBodyScroll($event)"
                    [frameworkComponents]="option_fabric_frameworkComponents" (gridReady)="option_fabric_onGridReadyOptions($event)" [floatingFiltersHeight]="floatingFiltersHeight" [rowHeight]="rowHeight"
                    [headerHeight]="headerHeight" (filterChanged)="option_fabric_onFilterChanged($event)">
                    </ag-grid-angular>
        </div>
        <div class="modal-footer py-1">

          <button class="Newcancelbtn" (click)="fabricModalClose()">{{'Cancel' | translate}}</button>
        </div>

      </div>
</ng-template>
 <!--EDIT OPTION/FABRIC FIELDS POPUP START -->
 <!-- <app-contactinfo-popup  #supplierlistPopup [contactaddOuterFlag]="true" (suppliercontactdata)="loadSupplierList()"></app-contactinfo-popup> -->

 <!--GALLERY IMAGE POPUP START -->
<ng-template #galleryImageModal>
      <div id="galleryImagePopup">

        <div class="modal-header py-3">
          <h5 class="modal-title" id="exampleModalLabel"> {{'Images' | translate}} </h5>
          <button type="button" class="close" aria-label="Close" (click)="ngxModalService.closeModal('galleryImageModal')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
         <div *ngIf="fullpreview">
            <div class="overallpreviewbg">
               <!-- <div *ngIf="!receipedisabledflag"  class="tab-pane coming fulpreview" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <div>
                     <div class="framefix fabricfix fullview" [ngClass]="backgroundimageurl == 'assets/noimage.png' ? 'colorCenter' : ''" *ngIf="colorimageurl">
                        <img id="prod_colorimg" src="{{ colorimageurl}}">
                     </div>
                     <div class="framefix" *ngIf="frameimageurl">
                        <img src="{{ frameimageurl }}">
                     </div>
                  </div>
               </div> -->
               <div  *ngIf="!receipedisabledflag"  class="tab-pane coming" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <div class="save_prod_image" id="bgImgUrl">
                     <div *ngIf="colorimageurl" id="pro_color_image" [ngStyle]="{'background-image': 'url(' + colorimageurl + ')'}" [ngClass]="category == '5' ? 'shutterclass' : ''">
                     </div>
                     <div class="prdimg pro_bg-image fulpreview" id="prodbackurl" [ngStyle]="{'background-image': 'url(' + backgroundimageurl + ')'}" >
                     </div>
                  </div>
                     <!-- <div class="framefix" *ngIf="frameimageurl">
                        <img src="{{ frameimageurl }}">
                     </div> -->
               </div>
               </div>
         </div>
         <ng-container *ngIf="!fullpreview">
            <div class="container-fluid text-center my-2 gal-body">
               <div class="row" *ngIf="imageForProColOpt?.optionsimages?.length">
                  <ng-container *ngFor="let optimg of imageForProColOpt?.optionsimages">
                     <div class="col-md-3 p-0" (mouseenter)="optimg.optName = true" (mouseleave)="optimg.optName = false">
                        <div class="m-2 gal-img" (click)="openSingleImageModel(optimg)">
                           <img src="{{ envImageUrl + optimg.optionimage }}" alt="">
                        <div *ngIf="optimg.optName" class="background"></div>
                           <div class="optionName" *ngIf="optimg.optName">
                              <p>{{optimg.optionname | translate}} <span *ngIf="optimg.optioncode">-</span> {{optimg.optioncode}}</p>
                           </div>
                        </div>
                     </div>
                  </ng-container>
               </div>
            </div>
         </ng-container>
        </div>
        <div class="modal-footer d-none py-1">
          <!-- <button class="Newcancelbtn" data-dismiss="modal">Cancel</button> -->
        </div>
      </div>
</ng-template>
 <!--GALLERY IMAGE POPUP END -->


  <!--SINGLE IMAGE POPUP START -->
<div class="modal fade" id="singleImagePopup" data-backdrop="static"  role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered modal-md" role="document">
      <div class="modal-content">
        <div class="modal-header border-0 py-1">
          <h5 class="modal-title invisible" id="exampleModalLabel"> {{'Single Images' | translate}} </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="">
           <div id="carouselExampleControls1" class="carousel slide" data-interval="false">
               <div class="carousel-inner" *ngIf="imageForProColOpt?.optionsimages?.length">
                  <ng-container *ngFor="let optimg of imageForProColOpt.optionsimages">
                     <div class="carousel-item caro-img" id="{{ 'img_id_' + optimg.optionid }}">
                          <img class="d-block w-100" src="{{ envImageUrl + optimg.optionimage }}" alt="First slide">
                           <div class="optionName" style="background: #48443952;">
                             <p>{{optimg.optionname | translate}} <span *ngIf="optimg.optioncode">-</span> {{optimg.optioncode}}</p>
                          </div>
                      </div>
                  </ng-container>
                 <!-- <div class="carousel-item active">
                   <img class="d-block w-100" src="assets/image1.png" alt="First slide">
                 </div>
                 <div class="carousel-item">
                   <img class="d-block w-100" src="assets/image2.png" alt="Second slide">
                 </div>
                 <div class="carousel-item">
                   <img class="d-block w-100" src="assets/image3.png" alt="Third slide">
                 </div>
                 <div class="carousel-item">
                   <img class="d-block w-100" src="assets/image4.png" alt="Third slide">
                 </div> -->
               </div>
               <a class="carousel-control-prev" href="#carouselExampleControls1" role="button" data-slide="prev">
                 <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                 <span class="sr-only">{{'Previous' | translate}}</span>
               </a>
               <a class="carousel-control-next" href="#carouselExampleControls1" role="button" data-slide="next">
                 <span class="carousel-control-next-icon" aria-hidden="true"></span>
                 <span class="sr-only">{{'Next' | translate}}</span>
               </a>
           </div>
        </div>
       <div class="modal-footer py-1 d-none">
       <button class="Newcancelbtn" data-dismiss="modal">{{'Cancel' | translate}}</button>
       </div>
   </div>
   </div>
</div>
 <!--SINGLE IMAGE POPUP END -->

 <!-- location view popup start -->

<app-appstatuspopup [type]="'location'" #locationPopupSetup (locationRes)="newLocChanges($event)"></app-appstatuspopup>

 <!-- location view popuop end -->